<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title> ä»0-1å…¥é—¨æ•°æ®å¯è§†åŒ– </title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="ä»O-1å¼€å§‹å­¦æ•°æ®å¯è§†åŒ–ã€canvasã€three.js å­¦ä¹ èµ„æ–™">
    
    <link rel="preload" href="/learn-visualization/assets/css/0.styles.0a85baeb.css" as="style"><link rel="preload" href="/learn-visualization/assets/js/app.b91ad8ae.js" as="script"><link rel="preload" href="/learn-visualization/assets/js/3.17508fe9.js" as="script"><link rel="preload" href="/learn-visualization/assets/js/1.cf7fd066.js" as="script"><link rel="preload" href="/learn-visualization/assets/js/14.06574b25.js" as="script"><link rel="prefetch" href="/learn-visualization/assets/js/10.a1eaef1e.js"><link rel="prefetch" href="/learn-visualization/assets/js/11.4e55ab14.js"><link rel="prefetch" href="/learn-visualization/assets/js/12.05411bff.js"><link rel="prefetch" href="/learn-visualization/assets/js/13.02e00d4e.js"><link rel="prefetch" href="/learn-visualization/assets/js/15.3561c938.js"><link rel="prefetch" href="/learn-visualization/assets/js/16.2c5ed74e.js"><link rel="prefetch" href="/learn-visualization/assets/js/17.82f9aa66.js"><link rel="prefetch" href="/learn-visualization/assets/js/18.cb368df1.js"><link rel="prefetch" href="/learn-visualization/assets/js/19.4dfc98e7.js"><link rel="prefetch" href="/learn-visualization/assets/js/20.43996e52.js"><link rel="prefetch" href="/learn-visualization/assets/js/21.57b5193a.js"><link rel="prefetch" href="/learn-visualization/assets/js/22.d68a1db7.js"><link rel="prefetch" href="/learn-visualization/assets/js/23.2e94e8b3.js"><link rel="prefetch" href="/learn-visualization/assets/js/24.b7815451.js"><link rel="prefetch" href="/learn-visualization/assets/js/25.52ad0efa.js"><link rel="prefetch" href="/learn-visualization/assets/js/26.69c8a6df.js"><link rel="prefetch" href="/learn-visualization/assets/js/27.6cf04777.js"><link rel="prefetch" href="/learn-visualization/assets/js/28.5f504aec.js"><link rel="prefetch" href="/learn-visualization/assets/js/29.4d5bbc86.js"><link rel="prefetch" href="/learn-visualization/assets/js/30.4e617516.js"><link rel="prefetch" href="/learn-visualization/assets/js/31.31a90564.js"><link rel="prefetch" href="/learn-visualization/assets/js/32.ec1d570a.js"><link rel="prefetch" href="/learn-visualization/assets/js/33.930d56c2.js"><link rel="prefetch" href="/learn-visualization/assets/js/34.082d146b.js"><link rel="prefetch" href="/learn-visualization/assets/js/35.b310643f.js"><link rel="prefetch" href="/learn-visualization/assets/js/4.3d47e2fb.js"><link rel="prefetch" href="/learn-visualization/assets/js/5.9b726287.js"><link rel="prefetch" href="/learn-visualization/assets/js/6.bd3a10aa.js"><link rel="prefetch" href="/learn-visualization/assets/js/7.8319d452.js"><link rel="prefetch" href="/learn-visualization/assets/js/8.d836b34f.js"><link rel="prefetch" href="/learn-visualization/assets/js/9.e7af3203.js">
    <link rel="stylesheet" href="/learn-visualization/assets/css/0.styles.0a85baeb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2> ä»0-1å…¥é—¨æ•°æ®å¯è§†åŒ– </h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>ä»O-1å¼€å§‹å­¦æ•°æ®å¯è§†åŒ–ã€canvasã€three.js å­¦ä¹ èµ„æ–™</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
          Â Â 
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-visualization/" class="home-link router-link-active"><img src="https://cdn.poizon.com/node-common/e04c9a0c2a9322f99c2b881ced0741cc.png" alt=" ä»0-1å…¥é—¨æ•°æ®å¯è§†åŒ– " class="logo"> <span class="site-name"> ä»0-1å…¥é—¨æ•°æ®å¯è§†åŒ– </span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learn-visualization/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Flyçš„ç¤¾äº¤ç½‘ç«™
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wzf1997" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2805609406402798/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/159218800" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Bç«™
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/mai-chao-fu-de-a-fei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  çŸ¥ä¹
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>2</h3> <h6 data-v-39576ba9>æ–‡ç« </h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/learn-visualization/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Flyçš„ç¤¾äº¤ç½‘ç«™
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wzf1997" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2805609406402798/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/159218800" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Bç«™
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/mai-chao-fu-de-a-fei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  çŸ¥ä¹
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/three/3dearth" class="sidebar-heading clickable"><span>three.jsç³»åˆ—æ–‡ç« </span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/canvas/2d-resoures" class="sidebar-heading clickable open"><span>canvasç³»åˆ—æ–‡ç« </span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-visualization/blog/canvas/2d-firework.html" class="sidebar-link">canvaså®ç°çƒŸèŠ±åŠ¨ç”»</a></li><li><a href="/learn-visualization/blog/canvas/2d-move.html" class="sidebar-link">canvaså®ç°å¤šè¾¹å½¢çš„ç§»åŠ¨</a></li><li><a href="/learn-visualization/blog/canvas/2d-line.html" class="sidebar-link">canvaså®ç°æŠ˜ç°å›¾</a></li><li><a href="/learn-visualization/blog/canvas/2d-rbush.html" class="sidebar-link">canvasâ€”â€”ç©ºé—´å‡ ä½•ç´¢å¼•ç®—æ³•</a></li><li><a href="/learn-visualization/blog/canvas/2d-smooth-line.html" class="sidebar-link">canvasâ€”â€”å®ç°å¹³æ»‘çš„æ›²çº¿</a></li><li><a href="/learn-visualization/blog/canvas/2d-aoyun.html" class="sidebar-link">canvasâ€”â€”å¥¥è¿é‡‘ç‰ŒğŸ…æ•°æ®å¯è§†åŒ–</a></li><li><a href="/learn-visualization/blog/canvas/2d-event.html" aria-current="page" class="active sidebar-link">canvasâ€”â€”å®ç°äº‹ä»¶ç³»ç»Ÿ</a></li><li><a href="/learn-visualization/blog/canvas/2d-undo.html" class="sidebar-link">canvasâ€”â€”å®ç°undoRedo</a></li><li><a href="/learn-visualization/blog/canvas/2d-custom-path.html" class="sidebar-link">canvasâ€”â€”å®ç°è‡ªå®šä¹‰è·¯å¾„åŠ¨ç”»</a></li><li><a href="/learn-visualization/blog/canvas/2d-snow.html" class="sidebar-link">canvasâ€”â€”å®ç°ç²’å­åŠ¨ç”»</a></li><li><a href="/learn-visualization/blog/canvas/2d-imporve.html" class="sidebar-link">ä½ ä¸çŸ¥é“çš„canvaså‡ ç§ä¼˜åŒ–æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/webgl/index" class="sidebar-heading clickable"><span>webglç³»åˆ—æ–‡ç« </span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/math" class="sidebar-heading clickable"><span>ç²‰ä¸é—®ç­”ç³»åˆ—</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/canvas-improve" class="sidebar-heading clickable"><span>ä»0-1å¸¦ä½ å­¦canvas</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/canvas-improve" class="sidebar-heading clickable"><span>ä»0-1å¸¦ä½ å­¦three.js</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/person/chooseGrapic" class="sidebar-heading clickable"><span>ä¸ªäººçœ‹æ³•</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
          Â Â 
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title"></h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><p>å¤§å®¶å¥½ï¼ æˆ‘æ˜¯çƒ­çˆ±å›¾å½¢çš„fly, ä¹‹å‰åœ¨ç¾¤é‡Œå’Œç²‰ä¸è®¨è®ºcanvas å¦‚ä½•äº‹ä»¶ç³»ç»Ÿï¼Œ ç„¶åå‘¢ï¼Ÿ æˆ‘è‡ªå·±å…¶å®ä¹Ÿå¯¹è¿™ä¸ªæ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œ æˆ‘çœ‹è¿‡å¾ˆå¤šcanvas å®ç°çš„é¡¹ç›®ï¼Œ æ¯”å¦‚canvas å®ç°æ€ç»´å¯¼å›¾ <strong>xmind</strong> ï¼Œ canvas å®ç°ä¸€ä¸ª<strong>ç»˜å›¾å·¥å…·</strong>ã€‚ ç„¶åå‘¢æ— è®ºæ˜¯å“ªä¸€ä¸ªï¼Œå…¶å®èƒŒåéƒ½æ˜¯åœ¨canavs èƒŒåå®ç°äº†ä¸€å¥—äº‹ä»¶ç³»ç»Ÿï¼Œå¯æƒœè¿™äº›æºç éƒ½ä¸å¼€æºã€‚æ‰€ä»¥æœ¬ç€å­¦ä¹ çš„æ¿€æƒ…ï¼Œ æˆ‘å‚è€ƒäº†ä¸€äº›æ–‡ç« å®ç°ä¸€ä¸ªç®€å•äº‹ä»¶ç³»ç»Ÿã€‚æœ¬ç¯‡æ–‡ç« ä½ å¯ä»¥å­¦åˆ°ä¸‹é¢ğŸ‘‡è¿™äº›å†…å®¹</p> <ol><li>æˆ‘æ˜¯æ€ä¹ˆåŸºäºcanvaså»<strong>æ„å»ºåŸºç¡€æ¡†æ¶</strong>çš„</li> <li>å‡ ä½•ç®—æ³•â€”â€” <strong>åˆ¤æ–­ç‚¹æ˜¯ä¸æ˜¯ä»»æ„å¤šè¾¹å½¢å†…éƒ¨</strong></li> <li>å¦‚ä½•è¿›è¡Œ<strong>äº‹ä»¶åˆ†å‘</strong>å’Œ<strong>é˜»æ­¢äº‹ä»¶å†’æ³¡</strong></li></ol> <p>æœ¬ç¯‡æ–‡ç« æˆ‘å…¨æ˜¯å¹²è´§ã€‚æ¬¢è¿ç‚¹èµã€å…³æ³¨ã€æ”¶è—ã€‚</p> <h1 id="åŸºç¡€æ¡†æ¶çš„æ­å»º"><a href="#åŸºç¡€æ¡†æ¶çš„æ­å»º" class="header-anchor">#</a> åŸºç¡€æ¡†æ¶çš„æ­å»º</h1> <h2 id="å›¾å½¢ç±»"><a href="#å›¾å½¢ç±»" class="header-anchor">#</a> å›¾å½¢ç±»</h2> <p>ç¬¬ä¸€æ­¥æˆ‘è¦åšçš„äº‹å°±æ˜¯è¿›è¡Œæ¦‚å¿µæŠ½è±¡ï¼Œå¤§å®¶å»æƒ³ä¸€ä¸‹ï¼Œcanvasæœ¬è´¨æ˜¯ä¸€å±‚ç”»å¸ƒï¼Œç„¶åç”»å¸ƒä¸Šå¾ˆå¤šå›¾å½¢ï¼Œæœ‰é•¿æ–¹å½¢ã€åœ†å½¢ã€ä»¥åŠä»»æ„é—­åˆçš„å¤šè¾¹å½¢.  ä»é¢å‘å¯¹è±¡çš„è§’åº¦è€ƒè™‘çš„è¯ï¼Œ æˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ªåŸºç±» â€”â€” <strong>shape</strong>  æ¯ä¸ªå›¾å½¢æ˜¯ä¸æ˜¯éƒ½åœ¨canvas å»æ˜¾ç¤ºï¼Œæ‰€ä»¥éƒ½åº”è¯¥æœ‰ä¸€ä¸ª</p> <p>draw æ–¹æ³•ï¼Œ è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•å°±æ˜¯åˆ¤æ–­é¼ æ ‡çš„ç‚¹ æ˜¯ä¸æ˜¯åœ¨å½“å‰å›¾å½¢çš„å†…éƒ¨ï¼Œè¿™ä¸ªæˆ‘æˆ‘ä»¬åé¢åœ¨è®¨è®ºå§ã€‚ ç„¶åæ¯ä¸ªå›¾å½¢æœ‰è‡ªå·±çš„ç‰¹æœ‰çš„å±æ€§ï¼Œç»“åˆcanvas çš„api å»è®¾ç½®ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props
  <span class="token punctuation">}</span>

  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// åˆ¤æ–­é¼ æ ‡çš„ç‚¹æ˜¯å¦åœ¨å›¾å½¢å†…éƒ¨</span>
  <span class="token function">isPointInClosedRegion</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Rect</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props
  <span class="token punctuation">}</span>
  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// åˆ¤æ–­é¼ æ ‡çš„ç‚¹æ˜¯å¦åœ¨å›¾å½¢å†…éƒ¨</span>
  <span class="token function">isPointInClosedRegion</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸Šé¢ä¸¤ä¸ªå›¾å½¢çœ‹ç»“æ„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸ä¸€æ ·çš„<strong>draw</strong>æ–¹æ³•,  æˆ‘ç»™ä½ 1åˆ†é’Ÿæ—¶é—´æ€è€ƒğŸ¤”ä¸‹ï¼Œcanvas æ˜¯å¦‚ä½•ç”»çŸ©å½¢å’Œç”»åœ†çš„ã€‚ å…¶å® å°±æ˜¯ä¸¤ä¸ªapiä¸€ä¸ª <strong>arc</strong>ä¸€ä¸ª<strong>rect</strong> ç„¶å ä½ ä¼ å…¥å¯¹åº”çš„å‚æ•°å°±å¥½äº†ã€‚è¿™é‡Œæ²¡ä»€ä¹ˆï¼Œ ä¸çŸ¥é“çš„åŒå­¦å¯ä»¥å»MDNå»çœ‹ä¸‹ï¼Œ æˆ‘å·²ç»è®²äº†å¾ˆå¤šç¯‡äº†ã€‚æˆ‘å°±ç›´æ¥ç»™å‡ºä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> center<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> fillColor <span class="token operator">=</span> <span class="token string">'black'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> center
ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillColor
ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿™æ˜¯åœ†çš„ï¼Œ save å’Œ restore çš„æ–¹æ³• å¦™å¤„ å°±æ˜¯ æ¯”å¦‚æˆ‘ç»™åœ†è®¾ç½®çº¢è‰² ï¼Œå¦‚æœæˆ‘å†å»ç”»çŸ©å½¢ï¼Œ çŸ©å½¢ä¹Ÿä¼šå˜æˆçº¢è‰²ï¼Œ è¿™æ ·å°±ä¸å¯æ§äº†ï¼Œåœ†çš„è¯å°±æ˜¯ åœ†å¿ƒ åŠ  åŠå¾„ï¼ŒåŠ å¡«å……é¢œè‰²ã€‚</p> <p>çœ‹å®Œåœ†çš„æˆ‘ä»¬åœ¨çœ‹ä¸‹çŸ©å½¢çš„ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> leftTop<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> fillColor <span class="token operator">=</span> <span class="token string">'black'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> leftTop
ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillColor
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>çŸ©å½¢çš„å±æ€§ ä¸€ä¸ªå·¦ä¸Šè§’çš„ç‚¹ä¸€ä¸ªé•¿åº¦ï¼Œä¸€ä¸ªå®½åº¦ã€‚ok ,åˆ°è¿™é‡Œå›¾å½¢åŸºæœ¬æ­å»ºå®Œæˆï¼Œä¸‹é¢å¼€å§‹æ­å»ºç”»å¸ƒç±»</p> <h2 id="ç”»å¸ƒç±»"><a href="#ç”»å¸ƒç±»" class="header-anchor">#</a> ç”»å¸ƒç±»</h2> <p>ç”»å¸ƒç±»çš„ç›®å‰åšçš„äº‹æƒ…éå¸¸ç®€å•å“ˆï¼Œåˆå§‹åŒ–ä¸€äº›å±æ€§ã€‚é¦–å…ˆä»–æœ‰ä¸ªadd() æ–¹æ³•ï¼Œå»å¾€ç”»å¸ƒå¢åŠ å„ä¸ªå›¾å½¢ã€‚å¢åŠ çš„å›¾å½¢ï¼Œæ¯ä¸€ä¸ªå›¾å½¢å†…éƒ¨éƒ½å»å®ç°äº†<strong>draw</strong> æ–¹æ³•ã€‚è¿™æ ·å®ç°äº†å¾€canvas åŠ å›¾å½¢çš„æ“ä½œå“ˆã€‚ç›´æ¥çœ‹ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ–°å»ºä¸€ä¸ªç”»å¸ƒç±»</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Canvas</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    shape<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>shape<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œæˆ‘ä»¬å†™ä¸€äº›ä»£ç æµ‹è¯•ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Canvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  center<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  fillColor<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  leftTop<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  fillColor<span class="token operator">:</span> <span class="token string">'black'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// æ·»åŠ </span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>
</code></pre></div><p>è¿™æ ·å†™ä»£ç æ˜¯ä¸æ˜¯æ„Ÿè§‰ååˆ†çš„èˆ’æœï¼Œ å¾ˆæ¸…é™¤ï¼Œ å¯è¯»æ€§éå¸¸çš„é«˜å“‡</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815192814301.png" alt="ç”»å¸ƒåˆ›å»º"></p> <p>OKï¼Œçœ‹æ¥æˆ‘ä»¬å†™çš„ä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä¸‹é¢å†™ä¸€ä¸ªç¨å¾®å¤æ‚çš„å›¾å½¢ï¼Œä»»æ„ç‚¹ç»„æˆçš„é—­åˆ<strong>polygon</strong></p> <h2 id="polygonç±»"><a href="#polygonç±»" class="header-anchor">#</a> polygonç±»</h2> <p>åŒæ ·æ˜¯ä¹Ÿæ˜¯æœ‰draw å’Œ isPointInClosedRegion è¿™ä¸ªä¸¤ä¸ªæ–¹æ³•ï¼Œ ç”»å›¾çš„è¿™ä¸ªæ–¹æ³•å‘¢ï¼Œ å±æ€§å°±æ˜¯ä¸€å †2dç‚¹ï¼Œ ç¬¬ä¸€ä¸ªç‚¹æ˜¯ç§»åŠ¨ç”»ç¬”ğŸ–Œï¼Œ å…¶ä½™çš„ç‚¹è°ƒç”¨canvas <strong>lineTo</strong>çš„æ–¹æ³•ã€‚ ç„¶å é—­åˆåŒºåŸŸå°±å¥½äº† ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Polygon</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props
  <span class="token punctuation">}</span>
  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> points<span class="token punctuation">,</span> fillColor <span class="token operator">=</span> <span class="token string">'black'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillColor
    points<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">point<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> point
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">getDispersed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>points
  <span class="token punctuation">}</span>

  <span class="token function">isPointInClosedRegion</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æµ‹è¯•çš„è¯ï¼Œæˆ‘æ˜¯éšæœºåœ¨ç”»å¸ƒå–äº†5ä¸ªç‚¹ï¼Œ æˆ‘ç”¨äº†æˆ‘ä¹‹å‰å†™çš„<strong>Point2d</strong>ç±»ï¼Œ ä¸Šæœ‰ä¸ªrandomæ–¹æ³•ï¼Œ ä¼ å…¥canvas çš„é•¿åº¦å’Œå®½åº¦ã€‚ä¸æ¸…æ¥šçš„åŒå­¦çœ‹çœ‹æˆ‘ä¹‹å‰å†™ <strong>canvaså®ç°ç‚¹çš„ç§»åŠ¨</strong>ï¼Œ é‚£é‡Œ æˆ‘æœ‰è¯¦ç»†ä»‹ç»è¿‡ã€‚æµ‹è¯•ä»£ç å¦‚ä¸‹:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  points<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Point2d<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> shape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Polygon</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  points<span class="token punctuation">,</span>
  fillColor<span class="token operator">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// æ·»åŠ åˆ°ç”»å¸ƒä¸­</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>shape<span class="token punctuation">)</span>
</code></pre></div><p>æˆ‘ä»¬çœ‹ä¸‹ç»“æœï¼š</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815194130841.png" alt="ä¸‰ä¸ªå›¾å½¢"></p> <h2 id="åŸºç±»shape"><a href="#åŸºç±»shape" class="header-anchor">#</a> åŸºç±»shape</h2> <p>å†™åˆ°è¿™é‡Œå°±æœ‰äººé—®åˆ°ï¼Œ è¿™ä¸ªä¸‰ä¸ªç±» éƒ½ç»§æ‰¿ åŸºç±» shape, shape æœ‰ä»€ä¹ˆé€šç”¨çš„èƒ½åŠ›å‘¢ï¼Ÿ è¿™é‡Œå¼€å§‹åˆ°æˆ‘ä»¬æœ¬æ–‡çš„ä¸»é¢˜äº†ï¼Œ å°±æ˜¯æ¯ä¸ªå›¾å½¢çš„æ˜¯ä¸æ˜¯æœ‰ç›‘å¬äº‹ä»¶ï¼Œ äº‹ä»¶æœ‰å¾ˆå¤šç§ç±»å‹ã€‚æ¯ä¸ªç±»å‹ä¸‹è‚¯å®šæœ‰ä¸€å¤§å †çš„ç›‘å¬å‡½æ•°ï¼Œ OK ï¼Œé¦–å…ˆè¿™æ˜¯å¤§å®¶é€šç”¨çš„èƒ½åŠ›ï¼Œ æˆ–è€…æ˜¯å¤§å®¶éƒ½éœ€è¦çš„é¢ä¸œè¥¿ï¼Œ æˆ‘ä»¬å°±æŠŠæ”¾åœ¨åŸºç±»ä¸­å°±å¥½äº†ï¼Œ é‚£ä¹ˆæˆ‘ä»¬ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„å»å­˜å‚¨å‘¢â€”â€” è¿™ç§key Value ä¸€çœ‹å°±æ˜¯ç”¨<strong>Map</strong>, è¡Œå§æˆ‘ä»¬çœ‹ä¸‹ä»£ç å§ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å›¾å½¢çš„åŸºç±»</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>listenerMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> listener</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>listenerMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>eventName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>listenerMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>eventName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>listenerMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> <span class="token punctuation">[</span>listener<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>On è¿™ä¸ªæ–¹æ³•å“ˆï¼Œ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶åå­—ï¼Œ ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯listeneräº†ï¼Œ OKåˆ°ç›®å‰ä¸ºæ­¢ï¼Œ æ¯ä¸ªå›¾å½¢å¯¹åº”çš„äº‹ä»¶ï¼Œéƒ½æœ‰äº†listenerã€‚</p> <h1 id="äº‹ä»¶åˆ†å‘"><a href="#äº‹ä»¶åˆ†å‘" class="header-anchor">#</a> äº‹ä»¶åˆ†å‘</h1> <p>è¿™ä¸ªå°èŠ‚ï¼Œå°±æ˜¯å°†æ‰€æœ‰canvas ç»‘å®šçš„äº‹ä»¶ï¼Œä¼ é€’åˆ°æ¯ä¸ªå›¾å½¢ä¸Šå»ã€‚ç¬¬ä¸€æ­¥å“ˆï¼Œæˆ‘ä»¬é¦–å…ˆä¸º<strong>canvas</strong> ç»‘å®šç›‘å¬å‡½æ•°ã€‚</p> <blockquote><p>å°Tipsï¼š ä¸ºcanvas å¢åŠ é”®ç›˜äº‹ä»¶çš„æ—¶å€™ï¼Œéœ€è¦ç»™canvas å¢åŠ ä¸€ä¸ªå±æ€§ <strong>tabinex = 0</strong> , ä¸ç„¶ ç»‘å®šæ— æ•ˆã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>move<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleEvent</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>click<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleEvent</span><span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Move å’Œclick æ˜¯æˆ‘å®šä¹‰ä¸ªä¸¤ä¸ªå¸¸é‡å“ˆï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> move <span class="token operator">=</span> <span class="token string">'mousemove'</span><span class="token keyword">export</span> <span class="token keyword">const</span> click <span class="token operator">=</span> <span class="token string">'mousedown'</span>
</code></pre></div><p>handleEvent è¿™ä¸ªæ–¹æ³• ç”¨åˆ°äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œ å°†äº‹ä»¶åå­— å’Œé€»è¾‘ è¿›è¡Œè§£è€¦å“‡ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">handleEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token comment">// è·å–å½“å‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬è€…      const listerns = shape.listenerMap.get(name)      if ( listerns ) {        listerns.forEach((listener) =&gt; listener(event))      }    })  }</span>
</code></pre></div><p>è¿™æ ·å…¶å®å°±å®ç°äº†äº‹ä»¶çš„åˆ†å‘ï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>circle<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>click<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">//event.isStopBubble = true  console.log(event, 'circle')})rect.on(click, (event) =&gt; {  console.log(event, 'rect')})</span>
</code></pre></div><p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%82%B9%E5%87%BB.gif" alt="äº‹ä»¶ç³»ç»Ÿç‚¹å‡»"></p> <p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å‘ç°é—®é¢˜ï¼Œ è™½ç„¶æˆ‘ä»¬å®ç°äº†äº‹ä»¶åˆ†å‘ï¼Œä½†æ˜¯å­˜åœ¨ä¸€ä¸ª<strong>é—®é¢˜</strong>ï¼Œæˆ‘åœ¨ç”»å¸ƒä¸Šä»»æ„ä¸€ç‚¹å‡»ï¼Œ éƒ½ä¼šè§¦å‘ï¼Œå¯èƒ½å…¶å®æˆ‘ç‚¹å‡»çš„æ ¹æœ¬ä¸åœ¨æˆ‘ç”»çš„å›¾å½¢å†…éƒ¨ã€‚æ‰€ä»¥æˆ‘ä»¬è¿›è¡Œäº‹ä»¶åˆ†å‘çš„æ—¶å€™ï¼Œè¿˜è¦åˆ¤æ–­ä¸‹é¼ æ ‡çš„ç‚¹ æ˜¯ä¸æ˜¯åœ¨é—­åˆçš„åŒºåŸŸå†…éƒ¨ã€‚æ‰€ä»¥è¯´å‘¢ï¼Œæ¯ä¸€ä¸ªshape å†…éƒ¨éƒ½è¦å»å®ç° <strong>isPointInClosedRegion</strong>  è¿™ä¸ªæ–¹æ³•ã€‚</p> <h2 id="åœ†çš„å®ç°"><a href="#åœ†çš„å®ç°" class="header-anchor">#</a> åœ†çš„å®ç°</h2> <p>åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯ä¸æ˜¯åœ¨äºåœ†å†…ï¼Œè¿™ä¸ªå…¶å®å¾ˆç®€å•ï¼Œä¸»è¦å»æ¯”<strong>è¾ƒ é¼ æ ‡çš„ç‚¹ å’Œåœ†å¿ƒçš„è·ç¦» ä¸ åŠå¾„åšæ¯”è¾ƒ</strong>ï¼Œç„¶åå°±å¯ä»¥åˆ¤æ–­äº†å“ˆï¼Œ è¿™ä¸ªæ²¡ä»€ä¹ˆã€‚ç›´æ¥ä¸Šä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> center<span class="token punctuation">,</span> radius <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propsreturn mouse<span class="token punctuation">.</span>point<span class="token punctuation">.</span><span class="token function">distance</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> radius <span class="token operator">*</span> radius
</code></pre></div><h2 id="çŸ©å½¢çš„å®ç°"><a href="#çŸ©å½¢çš„å®ç°" class="header-anchor">#</a> çŸ©å½¢çš„å®ç°</h2> <p>åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯ä¸æ˜¯åœ¨çŸ©å½¢å†…ï¼Œ è¿™é‡Œå…¶å®æœ‰ä¸ªåŒ…å›´ç›’çš„æ¦‚å¿µï¼Œä½†æ˜¯çŸ©å½¢ æœ¬æ¥å°±æ˜¯æ–¹æ–¹æ­£æ­£çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€éƒ¨æ ¹æ®ï¼Œ å·¦ä¸Šè§’çš„ç‚¹ï¼Œç®—å‡ºçŸ©å½¢çš„minXï¼Œ minY, maxX,maxY ç„¶å å»æ‹¿é¼ æ ‡çš„ç‚¹å»æ¯”è¾ƒå°±å¥½äº†ã€‚ è¿™é‡Œæˆ‘ç»™å¤§å®¶ç”»ä¸ªå›¾ï¼š</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815202206407.png" alt="çŸ©å½¢çš„åŒ…å›´ç›’"></p> <p>çœ‹åˆ°è¿™å¼ å›¾åº”è¯¥ä¸ç”¨è¯´ä»€ä¹ˆäº†ï¼Œ ç›´æ¥ä¸Šä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// åˆ¤æ–­é¼ æ ‡çš„ç‚¹æ˜¯å¦åœ¨å›¾å½¢å†…éƒ¨  isPointInClosedRegion(mouse) {    const { x, y } = mouse.point    const { leftTop, width, height } = this.props    const { x: minX, y: minY } = leftTop    const maxX = minX + width    const maxY = minY + height    if (x &gt;= minX &amp;&amp; x &lt;= maxX &amp;&amp; y &gt;= minY &amp;&amp; y &lt;= maxY) {      return true    }    return false  }</span>
</code></pre></div><h1 id="ç‚¹åœ¨ä»»æ„å¤šè¾¹å½¢å†…-ç®—æ³•"><a href="#ç‚¹åœ¨ä»»æ„å¤šè¾¹å½¢å†…-ç®—æ³•" class="header-anchor">#</a> ç‚¹åœ¨ä»»æ„å¤šè¾¹å½¢å†…ï¼ˆç®—æ³•ï¼‰</h1> <p>ç®€å•çš„å›¾å½¢æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°å­¦å…³ç³»å»æ¯”è¾ƒï¼Œä½†æ˜¯å¤æ‚çš„å¤šè¾¹å½¢å‘¢ï¼Œ å¤šè¾¹å½¢åˆ†ä¸º <strong>å‡¹å¤šè¾¹å½¢</strong> å’Œ<strong>å‡¸å¤šè¾¹å½¢</strong>ã€‚é‚£æˆ‘ä»¬è¯¥æ€ä¹ˆå»è§£å†³å‘¢ï¼Ÿç¤¾åŒºæœ‰ä¸‹é¢å‡ ç§æ–¹æ³•ï¼š</p> <ol><li><strong>å¼•å°„çº¿æ³•</strong>ï¼šä»ç›®æ ‡ç‚¹å‡ºå‘å¼•ä¸€æ¡å°„çº¿ï¼Œçœ‹è¿™æ¡å°„çº¿å’Œå¤šè¾¹å½¢æ‰€æœ‰è¾¹çš„äº¤ç‚¹æ•°ç›®ã€‚å¦‚æœæœ‰å¥‡æ•°ä¸ªäº¤ç‚¹ï¼Œåˆ™è¯´æ˜åœ¨å†…éƒ¨ï¼Œå¦‚æœæœ‰å¶æ•°ä¸ªäº¤ç‚¹ï¼Œåˆ™è¯´æ˜åœ¨å¤–éƒ¨ã€‚</li> <li><strong>é¢ç§¯å’Œåˆ¤åˆ«æ³•</strong>ï¼šåˆ¤æ–­ç›®æ ‡ç‚¹ä¸å¤šè¾¹å½¢çš„æ¯æ¡è¾¹ç»„æˆçš„ä¸‰è§’å½¢é¢ç§¯å’Œæ˜¯å¦ç­‰äºè¯¥å¤šè¾¹å½¢ï¼Œç›¸ç­‰åˆ™åœ¨å¤šè¾¹å½¢å†…éƒ¨ã€‚</li></ol> <p>å…·ä½“åšæ³•ï¼šå°†æµ‹è¯•ç‚¹çš„Yåæ ‡ä¸å¤šè¾¹å½¢çš„æ¯ä¸€ä¸ªç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œä¼šå¾—åˆ°ä¸€ä¸ªæµ‹è¯•ç‚¹æ‰€åœ¨çš„è¡Œä¸å¤šè¾¹å½¢è¾¹çš„äº¤ç‚¹çš„åˆ—è¡¨ã€‚åœ¨ä¸‹å›¾çš„è¿™ä¸ªä¾‹å­ä¸­æœ‰8æ¡è¾¹ä¸æµ‹è¯•ç‚¹æ‰€åœ¨çš„è¡Œç›¸äº¤ï¼Œè€Œæœ‰6æ¡è¾¹æ²¡æœ‰ç›¸äº¤ã€‚å¦‚æœæµ‹è¯•ç‚¹çš„ä¸¤è¾¹ç‚¹çš„ä¸ªæ•°éƒ½æ˜¯å¥‡æ•°ä¸ªåˆ™è¯¥æµ‹è¯•ç‚¹åœ¨å¤šè¾¹å½¢å†…ï¼Œå¦åˆ™åœ¨å¤šè¾¹å½¢å¤–ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­æµ‹è¯•ç‚¹çš„å·¦è¾¹æœ‰5ä¸ªäº¤ç‚¹ï¼Œå³è¾¹æœ‰ä¸‰ä¸ªäº¤ç‚¹ï¼Œå®ƒä»¬éƒ½æ˜¯å¥‡æ•°ï¼Œæ‰€ä»¥ç‚¹åœ¨å¤šè¾¹å½¢å†…ã€‚</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815203222867.png" alt="example"></p> <p><strong>è¿™é‡Œæœ‰äººä¼šé—®ä¸ºä»€ä¹ˆå¥‡æ•°æ˜¯åœ¨å†…éƒ¨ï¼Œ å¶æ•°æ˜¯åœ¨å¤–éƒ¨å‘¢ï¼Ÿ</strong></p> <p>æˆ‘ä»¥æœ€ç®€å•çš„ä¾‹å­ï¼Œå¸¦ä½ å»è§£é‡Šä¸ºä»€ä¹ˆï¼Ÿè¿™æ—¶å€™åˆåˆ°äº†ï¼Œ ç”»å›¾æ—¶åˆ»ï¼š</p> <p>æˆ‘ä»¬å…ˆä»å†…éƒ¨é€‰ä¸€ä¸ªç‚¹ï¼Œç„¶åå‘ä»»æ„æ–¹å‘å‘å‡ºä¸€æ¡å°„çº¿ã€‚ ä½ ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°„çº¿ç¬¬ä¸€æ¬¡ä¸ç›´çº¿ç›¸äº¤ å«åš  <strong>ç©¿å…¥</strong>ï¼Œ åé¢å†ç›¸äº¤ å«åš<strong>ç©¿å‡º</strong>ï¼Œ ä½ ä¼šå‘ç°å†…éƒ¨çš„æœ€åæ°¸è¿œæ˜¯ç©¿å…¥ï¼Œæ²¡æœ‰ç©¿å‡ºï¼Œ ä½†æ˜¯å¤–éƒ¨çš„ç‚¹ï¼Œ æ°¸è¿œç©¿å…¥çš„åŒæ—¶ï¼Œ ç„¶åç©¿å‡ºã€‚æœ€åæ°¸è¿œæ˜¯<strong>ç©¿å‡º</strong></p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815215039500.png" alt="å†…éƒ¨çš„ç‚¹"></p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815215142806.png" alt="å¤–éƒ¨çš„ç‚¹"></p> <h2 id="ç®—æ³•å®ç°"><a href="#ç®—æ³•å®ç°" class="header-anchor">#</a> ç®—æ³•å®ç°</h2> <p>è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªä¸»è¦çš„ç®—æ³•å°±æ˜¯ çº¿æ®µ å’Œçº¿æ®µæ±‚<strong>ç„¦ç‚¹</strong>ã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<strong>Seg2d</strong>çš„ç±» çº¿æ®µè‚¯å®šæ˜¯æœ‰ä¸¤ä¸ªç«¯ç‚¹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Seg2d</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints <span class="token operator">=</span> <span class="token punctuation">[</span>start<span class="token punctuation">,</span> end<span class="token punctuation">]</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_asVector <span class="token operator">=</span> <span class="token keyword">undefined</span>  <span class="token punctuation">}</span>  <span class="token keyword">get</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token keyword">get</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Seg2d</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Seg2d</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">get</span> <span class="token function">asVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>_asVector <span class="token operator">||</span>      <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_asVector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y      <span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p>è¿™éƒ½æ˜¯åŸºæœ¬æ“ä½œæ²¡ä»€ä¹ˆå¥½è®²çš„ï¼Œ ä¸»è¦åœ¨ç±»ä¸Š å®ç°äº† ä¸¤ä¸ªé™æ€æ–¹æ³•</p> <ol><li>å¤šä¸ªç‚¹è½¬æˆçº¿æ®µ</li> <li>çº¿æ®µå’Œçº¿æ®µç›¸äº¤</li></ol> <p>æˆ‘å…ˆæ¥è®²ç¬¬ä¸€ä¸ªï¼Œå› ä¸ºæˆ‘ä»¬æˆ‘ä»¬ä¼ ç»™ä»»æ„å¤šè¾¹å½¢çš„å°±æ˜¯ ç‚¹çš„é›†åˆï¼Œ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¾—å°†è¿™äº›ç‚¹è¿æˆçº¿æ®µç»„æˆé—­åˆåŒºåŸŸã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">//ä¸€å †ç‚¹ è·å¾—é—­åˆä¸€å †çº¿æ®µ  static getSegments(points, closed = false) {    const list = []    for (let i = 1; i &lt; points.length; i++) {      list.push(new Seg2d(points[i - 1], points[i]))    }    if (closed &amp;&amp; !points[0].equal(points[points.length - 1])) {      list.push(new Seg2d(points[points.length - 1], points[0]))    }    return list  }</span>
</code></pre></div><p>Closed è¿™ä¸ªå‚æ•°ï¼Œ å› ä¸ºåŒºåŸŸæ˜¯æ»¡è¶³ä¸€ä¸ªæ–¹å‘çš„ã€‚æ‰€ä»¥é—­åˆåŒºåŸŸ è‚¯å®šæ˜¯é¦–å°¾ç›¸è¿çš„ã€‚</p> <h2 id="çº¿æ®µå’Œçº¿æ®µæ±‚ç„¦ç‚¹"><a href="#çº¿æ®µå’Œçº¿æ®µæ±‚ç„¦ç‚¹" class="header-anchor">#</a> çº¿æ®µå’Œçº¿æ®µæ±‚ç„¦ç‚¹</h2> <ol><li><strong>åˆ—æ–¹ç¨‹æ±‚ä¸¤ä¸ªç›´çº¿çš„ç„¦ç‚¹</strong></li> <li><strong>åˆ¤æ–­æ¯ä¸€æ¡çº¿æ®µçš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯å¦éƒ½åœ¨å¦ä¸€æ¡çº¿æ®µçš„ä¸¤ä¾§, æ˜¯åˆ™æ±‚å‡ºä¸¤æ¡çº¿æ®µæ‰€åœ¨ç›´çº¿çš„äº¤ç‚¹, å¦åˆ™ä¸ç›¸äº¤.</strong></li></ol> <p>è¿™é‡Œæˆ‘ä»¬ç”¨ç¬¬äºŒç§æ–¹æ³•å»å®ç° ï¼š</p> <p>ç¬¬ä¸€æ­¥åˆ¤æ–­ä¸¤ä¸ªç‚¹æ˜¯å¦åœ¨æŸæ¡çº¿æ®µçš„ä¸¤ä¾§, é€šå¸¸å¯é‡‡ç”¨æŠ•å½±æ³•:</p> <p>æ±‚å‡ºçº¿æ®µçš„æ³•çº¿å‘é‡, ç„¶åæŠŠç‚¹æŠ•å½±åˆ°æ³•çº¿ä¸Š, æœ€åæ ¹æ®æŠ•å½±çš„ä½ç½®æ¥åˆ¤æ–­ç‚¹å’Œçº¿æ®µçš„å…³ç³». è§ä¸‹å›¾</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815221634329.png" alt="æŠ•å½±å›¾"></p> <p>ç‚¹aå’Œç‚¹båœ¨çº¿æ®µcdæ³•çº¿ä¸Šçš„æŠ•å½±å¦‚å›¾æ‰€ç¤º, è¿™æ—¶å€™æˆ‘ä»¬è¿˜è¦åšä¸€æ¬¡çº¿æ®µcdåœ¨è‡ªå·±æ³•çº¿ä¸Šçš„æŠ•å½±(é€‰æ‹©ç‚¹cæˆ–ç‚¹dä¸­çš„ä¸€ä¸ªå³å¯).
ä¸»è¦ç”¨æ¥åšå‚è€ƒ.
å›¾ä¸­ç‚¹aæŠ•å½±å’Œç‚¹bæŠ•å½±åœ¨ç‚¹cæŠ•å½±çš„ä¸¤ä¾§, è¯´æ˜çº¿æ®µabçš„ç«¯ç‚¹åœ¨çº¿æ®µcdçš„ä¸¤ä¾§.</p> <p>åŒç†, å†åˆ¤æ–­ä¸€æ¬¡cdæ˜¯å¦åœ¨çº¿æ®µabä¸¤ä¾§å³å¯.</p> <p>æ±‚æ³•çº¿ , æ±‚æŠ•å½± ä»€ä¹ˆçš„å¬èµ·æ¥å¾ˆå¤æ‚çš„æ ·å­,  çš†æœ‰å…¬å¼å¯å¾ª:</p> <div class="language- extra-class"><pre class="language-text"><code>const nx=b.y - a.y,       ny=a.x - b.x;  const normalLine = {  x: nx, y: ny };  
</code></pre></div><p>æ±‚ç‚¹cåœ¨æ³•çº¿ä¸Šçš„æŠ•å½±ä½ç½®:</p> <div class="language- extra-class"><pre class="language-text"><code>const dist= normalLine.x*c.x + normalLine.y*c.y;  
</code></pre></div><p><strong>æ³¨æ„: è¿™é‡Œçš„&quot;æŠ•å½±ä½ç½®&quot;æ˜¯ä¸€ä¸ªæ ‡é‡, è¡¨ç¤ºçš„æ˜¯åˆ°æ³•çº¿åŸç‚¹çš„è·ç¦», è€Œä¸æ˜¯æŠ•å½±ç‚¹çš„åæ ‡.</strong></p> <p>å½“æˆ‘ä»¬æŠŠå›¾ä¸­ ç‚¹aæŠ•å½±(distA),ç‚¹bæŠ•å½±(distB),ç‚¹cæŠ•å½±(distC) éƒ½æ±‚å‡ºæ¥ä¹‹å, å°±å¯ä»¥å¾ˆå®¹æ˜“çš„æ ¹æ®å„è‡ªçš„å¤§å°åˆ¤æ–­å‡ºç›¸å¯¹ä½ç½®.</p> <p>distA==distB==distC æ—¶, ä¸¤æ¡çº¿æ®µå…±çº¿
distA==distB!=distC æ—¶, ä¸¤æ¡çº¿æ®µå¹³è¡Œ
distA å’Œ distB åœ¨distC åŒä¾§æ—¶, ä¸¤æ¡çº¿æ®µä¸ç›¸äº¤.
distA å’Œ distB åœ¨distC å¼‚ä¾§æ—¶, ä¸¤æ¡çº¿æ®µæ˜¯å¦ç›¸äº¤éœ€è¦å†åˆ¤æ–­ç‚¹cç‚¹dä¸çº¿æ®µabçš„å…³ç³».</p> <p>è¿™ä¸ªä¼˜åŒ– å°±ä¼˜åŒ–åœ¨è¿™é‡Œï¼Œ å›å»åšä¸€å±‚æ£€æµ‹ï¼Œ ç„¶åå†å»æ±‚ç„¦ç‚¹ï¼Œ æ±‚ç„¦ç‚¹ç”¨çš„ä¹Ÿæ˜¯å›ºå®šå…¬å¼ã€‚ æˆ‘ç»™å‡ºä¸‹é¢å®ç°ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">static</span> <span class="token function">lineLineIntersect</span><span class="token punctuation">(</span><span class="token parameter">line1<span class="token punctuation">,</span> line2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> a <span class="token operator">=</span> line1<span class="token punctuation">.</span>start    <span class="token keyword">const</span> b <span class="token operator">=</span> line1<span class="token punctuation">.</span>end    <span class="token keyword">const</span> c <span class="token operator">=</span> line2<span class="token punctuation">.</span>start    <span class="token keyword">const</span> d <span class="token operator">=</span> line2<span class="token punctuation">.</span>end    <span class="token keyword">const</span> interInfo <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment">//çº¿æ®µabçš„æ³•çº¿N1    const nx1 = b.y - a.y,      ny1 = a.x - b.x    //çº¿æ®µcdçš„æ³•çº¿N2    const nx2 = d.y - c.y,      ny2 = c.x - d.x    //ä¸¤æ¡æ³•çº¿åšå‰ä¹˜, å¦‚æœç»“æœä¸º0, è¯´æ˜çº¿æ®µabå’Œçº¿æ®µcdå¹³è¡Œæˆ–å…±çº¿,ä¸ç›¸äº¤    const denominator = nx1 * ny2 - ny1 * nx2    if (denominator == 0) {      return interInfo    }    //åœ¨æ³•çº¿N2ä¸Šçš„æŠ•å½±    const distC_N2 = nx2 * c.x + ny2 * c.y    const distA_N2 = nx2 * a.x + ny2 * a.y - distC_N2    const distB_N2 = nx2 * b.x + ny2 * b.y - distC_N2    // ç‚¹aæŠ•å½±å’Œç‚¹bæŠ•å½±åœ¨ç‚¹cæŠ•å½±åŒä¾§ (å¯¹ç‚¹åœ¨çº¿æ®µä¸Šçš„æƒ…å†µ,æœ¬ä¾‹å½“ä½œä¸ç›¸äº¤å¤„ç†);    if (distA_N2 * distB_N2 &gt;= 0) {      return interInfo    }    //    //åˆ¤æ–­ç‚¹cç‚¹d å’Œçº¿æ®µabçš„å…³ç³», åŸç†åŒä¸Š    //    //åœ¨æ³•çº¿N1ä¸Šçš„æŠ•å½±    const distA_N1 = nx1 * a.x + ny1 * a.y    const distC_N1 = nx1 * c.x + ny1 * c.y - distA_N1    const distD_N1 = nx1 * d.x + ny1 * d.y - distA_N1    if (distC_N1 * distD_N1 &gt;= 0) {      return interInfo    }    //è®¡ç®—äº¤ç‚¹åæ ‡    const fraction = distA_N2 / denominator    const dx = fraction * ny1,      dy = -fraction * nx1    interInfo.push(new Point2d(a.x + dx, a.y + dy))    return interInfo  }</span>
</code></pre></div><p>è¿™ä¸ªok ä¹‹åï¼Œæˆ‘ä»¬å»æŠŠä»»æ„å¤šè¾¹å½¢çš„æ–¹æ³•çš„æ˜¯å¦åœ¨é—­åˆåŒºåŸŸå†…çš„æ–¹æ³•å»å®ç°ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">isPointInClosedRegion</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> allSegs <span class="token operator">=</span> Seg2d<span class="token punctuation">.</span><span class="token function">getSegments</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDispersed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token comment">// é€‰å–ä»»æ„ä¸€æ¡å°„çº¿    const start = event.point    const xAxias = new Point2d(1, 0).multiplyScalar(800)    const end = start.clone().add(xAxias)    const anyRaySeg = new Seg2d(start, end)    let total = 0    allSegs.forEach((item) =&gt; {      const intersetSegs = Seg2d.lineLineIntersect(item, anyRaySeg)      total += intersetSegs.length    })    // å¥‡æ•°åœ¨å†…éƒ¨    if (total % 2 === 1) {      return true    }    return false  }</span>
</code></pre></div><p>ä»»æ„å°„çº¿ï¼Œæˆ‘ä»¥é¼ æ ‡çš„ç‚¹ï¼Œä½œä¸ºèµ·å§‹ç‚¹ï¼Œ æ–¹å‘æ˜¯Xè½´ï¼Œ ç®—å‡ºç»ˆç‚¹ã€‚  ç„¶åå¾—åˆ°ä»»æ„çº¿æ®µã€‚å»å’Œæ‰€æœ‰çº¿æ®µ å»æ±‚ç„¦ç‚¹ã€‚  ç»Ÿè®¡ç„¦ç‚¹ä¸ªæ•°ï¼Œ æ¥ç¡®å®šæ˜¯ä¸æ˜¯åœ¨å†…éƒ¨ã€‚</p> <p>OKï¼Œ è¿™æ—¶å€™æˆ‘ä»¬å§è§¦å‘äº‹ä»¶çš„æ¡ä»¶æ”¹å†™ä¸‹ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">handleEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token comment">// è·å–å½“å‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬è€…      const listerns = shape.listenerMap.get(name)      if (        listerns &amp;&amp;        shape.isPointInClosedRegion(event)      ) {        listerns.forEach((listener) =&gt; listener(event))      }    })  }</span>
</code></pre></div><p>è¿™æ ·å…¶å®å°±å·²ç»å®ç°äº†ï¼Œåœ¨åŒºåŸŸå†…éƒ¨å®ç°äº‹ä»¶è§¦å‘äº†ã€‚ çœ‹ä¸‹gif<img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/Aug-15-2021%2022-40-59.gif" alt="åŒºåŸŸå†…éƒ¨ç‚¹å‡»"></p> <p>ä¸€å¼€å§‹ç‚¹å‡»çš„æ˜¯ç©ºç™½å¤„ï¼Œç„¶åæˆ‘åˆ†åˆ«ç‚¹äº† polygon å’Œ çŸ©å½¢ å’Œåœ†å½¢ ï¼Œçœ‹æ§åˆ¶å° ä½ èƒ½çœ‹åˆ°ç»“æœã€‚è¯´æ˜æˆ‘ä»¬çš„ç®—æ³•å®ç°æˆåŠŸäº†ã€‚</p> <h1 id="é˜»æ­¢äº‹ä»¶å†’æ³¡"><a href="#é˜»æ­¢äº‹ä»¶å†’æ³¡" class="header-anchor">#</a> é˜»æ­¢äº‹ä»¶å†’æ³¡</h1> <p>è¿™æ—¶å€™æœ‰åŒå­¦åˆè¦é—®äº†ï¼Œ<strong>æˆ‘ç‚¹å‡»ä¸¤ä¸ªå›¾å½¢ç›¸äº¤çš„éƒ¨åˆ†ï¼Œæˆ‘åªæƒ³é€‰ä¸­å†…éƒ¨çš„ï¼Œ å¤–é¢çš„ä¸æƒ³é€‰ä¸­</strong>ã€‚ è¿™æ˜¯ä¸ªå¾ˆæ­£å¸¸çš„éœ€æ±‚ï¼Œé¦–å…ˆåŸç”Ÿçš„event è‚¯å®šå·²ç»æ»¡è¶³ä¸äº†æˆ‘ä»¬äº†ï¼Œ è§£å†³è¿™ä¸ªé—®é¢˜å°±æ˜¯ï¼Œåˆ†å‘åˆ°è¿™ä¸ªå›¾å½¢çš„æ—¶å€™ä¸å»è§¦å‘çš„æ‰€æœ‰listenersã€‚ä¸å°±æå®šäº†ã€‚æ‰€ä»¥æˆ‘é‡å†™äº†event,å…¶å® ä¹Ÿæ²¡ä»€ä¹ˆï¼Œä¹Ÿå°±åšäº†ä¸¤ä»¶äº‹</p> <ol><li>ç¬¬ä¸€ä»¶äº‹å°±æ˜¯å°†é¼ æ ‡çš„ç‚¹ è½¬ä¸º point2d</li> <li>å¢åŠ ä¸€ä¸ªå±æ€§isStopBubble  æ¥é˜»æ­¢å†’æ³¡</li></ol> <p>ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">getNewEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>offsetX<span class="token punctuation">,</span> event<span class="token punctuation">.</span>offsetY<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      point<span class="token punctuation">,</span>      isStopBubble<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token operator">...</span>event<span class="token punctuation">,</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘è¿™æ ·çš„å®ç°çš„ä¾æ®æ˜¯ å›¾å½¢çš„å¢åŠ åˆ°åœºæ™¯æ˜¯æœ‰åºçš„ã€‚è¿™é‡Œå’Œå¤§å®¶è¯´ä¸‹React äº‹ä»¶ç³»ç»Ÿï¼Œ ç”±äºæœ‰Vdomçš„å­˜åœ¨ï¼Œæ‰€ä»¥ä»–å°†äº‹ä»¶ç›‘å¬åˆ° document ä¸Šï¼Œ ç„¶åå†å»æŒ‰ç…§é¡ºåºï¼Œå»æ”¶é›†æ‰€æœ‰çš„lsitenersã€‚ äº‹ä»¶çš„æ•è· å’Œå†’æ³¡ å…¶å® å°±æ˜¯ä¸€ä¸ª é¡ºåº å’Œå€’å™çš„é—®é¢˜ã€‚ ä»–æ˜¯è¿™ä¹ˆå»å®ç°çš„ã€‚  ä»–é˜»æ­¢åˆæˆäº‹ä»¶å†’æ³¡ï¼Œ å°±æ˜¯åˆæˆäº‹ä»¶æœ‰ä¸ªe.stopPropagation() ã€‚ç”±äºæˆ‘ä»¬canvas æ²¡æœ‰domè¿™ä¸ªæ¦‚å¿µï¼Œæ‰€ä»¥æˆ‘ä»¬äººä¸ºå°è£…äº†ä¸€ä¸ªå±æ€§ï¼Œå¹¶ä¸”å°†eventä¼ ç»™æ¯ä¸ªå›¾å½¢ æœ‰ä»–ä»¬æ§åˆ¶ æ˜¯å¦é˜»æ­¢ã€‚çœ‹ä»£ç ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">handleEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    event <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getNewEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token comment">// è·å–å½“å‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬è€…      const listerns = shape.listenerMap.get(name)      if (        listerns &amp;&amp;        shape.isPointInClosedRegion(event)        &amp;&amp; !event.isStopBubble      ) {        listerns.forEach((listener) =&gt; listener(event))      }    })  }</span>
</code></pre></div><p>ä¸»è¦æ˜¯åŠ äº†ä¸ªæ¡ä»¶ã€‚æˆ‘ä»¬æ¥æµ‹è¯•ä¸‹ï¼š</p> <p>æ²¡é˜»æ­¢ï¼Œæˆ‘ç‚¹å‡»å…¬å…±åŒºåŸŸã€‚</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/%E6%B2%A1%E5%86%92%E6%B3%A1.gif" alt="æ²¡é˜»æ­¢å†’æ³¡"></p> <p>é˜»æ­¢å†’æ³¡ï¼Œ ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>circle<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>click<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  event<span class="token punctuation">.</span>isStopBubble <span class="token operator">=</span> <span class="token boolean">true</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">'circle'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>rect<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>click<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">'rect'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å¦‚å›¾ï¼š</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/%E9%98%BB%E6%AD%A2%E5%86%92%E6%B3%A1.gif" alt="é˜»æ­¢å†’æ³¡"></p> <h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h1> <p>æœ¬ç¯‡æ–‡ç« å¤§æ¦‚å°±æ˜¯ç®€å•çš„å®ç°äº†canvas çš„<strong>äº‹ä»¶ç³»ç»Ÿ</strong>äº†ï¼Œæ°´å¹³æœ‰é™ï¼Œèƒ½è¡¨è¾¾çš„å°±è¿™ä¹ˆå¤šã€‚å¦‚æœæœ‰æ›´å¥½çš„æ¬¢è¿è¡¥å……å­¦ä¹ å’Œäº¤æµï¼Œæ–‡ç« æœ‰é”™è¯¯çš„æ¬¢è¿æŒ‡æ­£ã€‚æˆ‘æ˜¯çƒ­çˆ±å›¾å½¢çš„Flyï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è§ğŸ‘‹å•¦ã€‚ æœ€åè§‰å¾—çœ‹å®Œå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œç‚¹èµğŸ‘ å†èµ°å§ã€‚ çŸ¥è¯†è¾“å‡ºä¸å®¹æ˜“ï¼Œæˆ‘ä¼šæŒç»­æŒç»­è¾“å‡ºé«˜è´¨é‡æ–‡ç« çš„ã€‚</p> <h1 id="èµ„æºè·å¾—"><a href="#èµ„æºè·å¾—" class="header-anchor">#</a> èµ„æºè·å¾—</h1> <p>å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å·**ã€å‰ç«¯å›¾å½¢ã€‘**ï¼Œå›å¤ <strong>ã€äº‹ä»¶ã€‘</strong> å¯ä»¥è·å¾—å…¨éƒ¨æºç ã€‚</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šä¸€æ¬¡æ›´æ–°æ—¶é—´: </span> <span class="time">2021/12/26 ä¸‹åˆ6:37:38</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/learn-visualization/blog/canvas/2d-aoyun.html" class="prev">
            canvasâ€”â€”å¥¥è¿é‡‘ç‰ŒğŸ…æ•°æ®å¯è§†åŒ–
          </a></span> <span class="next"><a href="/learn-visualization/blog/canvas/2d-undo.html">
            canvasâ€”â€”å®ç°undoRedo
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#å›¾å½¢ç±»" class="sidebar-link reco-side-å›¾å½¢ç±»" data-v-cb1513f6>å›¾å½¢ç±»</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#ç”»å¸ƒç±»" class="sidebar-link reco-side-ç”»å¸ƒç±»" data-v-cb1513f6>ç”»å¸ƒç±»</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#polygonç±»" class="sidebar-link reco-side-polygonç±»" data-v-cb1513f6>polygonç±»</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#åŸºç±»shape" class="sidebar-link reco-side-åŸºç±»shape" data-v-cb1513f6>åŸºç±»shape</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#åœ†çš„å®ç°" class="sidebar-link reco-side-åœ†çš„å®ç°" data-v-cb1513f6>åœ†çš„å®ç°</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#çŸ©å½¢çš„å®ç°" class="sidebar-link reco-side-çŸ©å½¢çš„å®ç°" data-v-cb1513f6>çŸ©å½¢çš„å®ç°</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#ç®—æ³•å®ç°" class="sidebar-link reco-side-ç®—æ³•å®ç°" data-v-cb1513f6>ç®—æ³•å®ç°</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#çº¿æ®µå’Œçº¿æ®µæ±‚ç„¦ç‚¹" class="sidebar-link reco-side-çº¿æ®µå’Œçº¿æ®µæ±‚ç„¦ç‚¹" data-v-cb1513f6>çº¿æ®µå’Œçº¿æ®µæ±‚ç„¦ç‚¹</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/learn-visualization/assets/js/app.b91ad8ae.js" defer></script><script src="/learn-visualization/assets/js/3.17508fe9.js" defer></script><script src="/learn-visualization/assets/js/1.cf7fd066.js" defer></script><script src="/learn-visualization/assets/js/14.06574b25.js" defer></script>
  </body>
</html>
