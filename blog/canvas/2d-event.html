<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title> 从0-1入门数据可视化 </title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="从O-1开始学数据可视化、canvas、three.js 学习资料">
    
    <link rel="preload" href="/learn-visualization/assets/css/0.styles.0a85baeb.css" as="style"><link rel="preload" href="/learn-visualization/assets/js/app.b91ad8ae.js" as="script"><link rel="preload" href="/learn-visualization/assets/js/3.17508fe9.js" as="script"><link rel="preload" href="/learn-visualization/assets/js/1.cf7fd066.js" as="script"><link rel="preload" href="/learn-visualization/assets/js/14.06574b25.js" as="script"><link rel="prefetch" href="/learn-visualization/assets/js/10.a1eaef1e.js"><link rel="prefetch" href="/learn-visualization/assets/js/11.4e55ab14.js"><link rel="prefetch" href="/learn-visualization/assets/js/12.05411bff.js"><link rel="prefetch" href="/learn-visualization/assets/js/13.02e00d4e.js"><link rel="prefetch" href="/learn-visualization/assets/js/15.3561c938.js"><link rel="prefetch" href="/learn-visualization/assets/js/16.2c5ed74e.js"><link rel="prefetch" href="/learn-visualization/assets/js/17.82f9aa66.js"><link rel="prefetch" href="/learn-visualization/assets/js/18.cb368df1.js"><link rel="prefetch" href="/learn-visualization/assets/js/19.4dfc98e7.js"><link rel="prefetch" href="/learn-visualization/assets/js/20.43996e52.js"><link rel="prefetch" href="/learn-visualization/assets/js/21.57b5193a.js"><link rel="prefetch" href="/learn-visualization/assets/js/22.d68a1db7.js"><link rel="prefetch" href="/learn-visualization/assets/js/23.2e94e8b3.js"><link rel="prefetch" href="/learn-visualization/assets/js/24.b7815451.js"><link rel="prefetch" href="/learn-visualization/assets/js/25.52ad0efa.js"><link rel="prefetch" href="/learn-visualization/assets/js/26.69c8a6df.js"><link rel="prefetch" href="/learn-visualization/assets/js/27.6cf04777.js"><link rel="prefetch" href="/learn-visualization/assets/js/28.5f504aec.js"><link rel="prefetch" href="/learn-visualization/assets/js/29.4d5bbc86.js"><link rel="prefetch" href="/learn-visualization/assets/js/30.4e617516.js"><link rel="prefetch" href="/learn-visualization/assets/js/31.31a90564.js"><link rel="prefetch" href="/learn-visualization/assets/js/32.ec1d570a.js"><link rel="prefetch" href="/learn-visualization/assets/js/33.930d56c2.js"><link rel="prefetch" href="/learn-visualization/assets/js/34.082d146b.js"><link rel="prefetch" href="/learn-visualization/assets/js/35.b310643f.js"><link rel="prefetch" href="/learn-visualization/assets/js/4.3d47e2fb.js"><link rel="prefetch" href="/learn-visualization/assets/js/5.9b726287.js"><link rel="prefetch" href="/learn-visualization/assets/js/6.bd3a10aa.js"><link rel="prefetch" href="/learn-visualization/assets/js/7.8319d452.js"><link rel="prefetch" href="/learn-visualization/assets/js/8.d836b34f.js"><link rel="prefetch" href="/learn-visualization/assets/js/9.e7af3203.js">
    <link rel="stylesheet" href="/learn-visualization/assets/css/0.styles.0a85baeb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2> 从0-1入门数据可视化 </h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>从O-1开始学数据可视化、canvas、three.js 学习资料</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-visualization/" class="home-link router-link-active"><img src="https://cdn.poizon.com/node-common/e04c9a0c2a9322f99c2b881ced0741cc.png" alt=" 从0-1入门数据可视化 " class="logo"> <span class="site-name"> 从0-1入门数据可视化 </span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learn-visualization/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Fly的社交网站
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wzf1997" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2805609406402798/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/159218800" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  B站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/mai-chao-fu-de-a-fei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>2</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/learn-visualization/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Fly的社交网站
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wzf1997" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/2805609406402798/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://space.bilibili.com/159218800" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  B站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/mai-chao-fu-de-a-fei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  知乎
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/three/3dearth" class="sidebar-heading clickable"><span>three.js系列文章</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/canvas/2d-resoures" class="sidebar-heading clickable open"><span>canvas系列文章</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-visualization/blog/canvas/2d-firework.html" class="sidebar-link">canvas实现烟花动画</a></li><li><a href="/learn-visualization/blog/canvas/2d-move.html" class="sidebar-link">canvas实现多边形的移动</a></li><li><a href="/learn-visualization/blog/canvas/2d-line.html" class="sidebar-link">canvas实现折现图</a></li><li><a href="/learn-visualization/blog/canvas/2d-rbush.html" class="sidebar-link">canvas——空间几何索引算法</a></li><li><a href="/learn-visualization/blog/canvas/2d-smooth-line.html" class="sidebar-link">canvas——实现平滑的曲线</a></li><li><a href="/learn-visualization/blog/canvas/2d-aoyun.html" class="sidebar-link">canvas——奥运金牌🏅数据可视化</a></li><li><a href="/learn-visualization/blog/canvas/2d-event.html" aria-current="page" class="active sidebar-link">canvas——实现事件系统</a></li><li><a href="/learn-visualization/blog/canvas/2d-undo.html" class="sidebar-link">canvas——实现undoRedo</a></li><li><a href="/learn-visualization/blog/canvas/2d-custom-path.html" class="sidebar-link">canvas——实现自定义路径动画</a></li><li><a href="/learn-visualization/blog/canvas/2d-snow.html" class="sidebar-link">canvas——实现粒子动画</a></li><li><a href="/learn-visualization/blog/canvas/2d-imporve.html" class="sidebar-link">你不知道的canvas几种优化方式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/webgl/index" class="sidebar-heading clickable"><span>webgl系列文章</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/math" class="sidebar-heading clickable"><span>粉丝问答系列</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/canvas-improve" class="sidebar-heading clickable"><span>从0-1带你学canvas</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/canvas-improve" class="sidebar-heading clickable"><span>从0-1带你学three.js</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/learn-visualization/blog/person/chooseGrapic" class="sidebar-heading clickable"><span>个人看法</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title"></h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><p>大家好！ 我是热爱图形的fly, 之前在群里和粉丝讨论canvas 如何事件系统， 然后呢？ 我自己其实也对这个比较感兴趣， 我看过很多canvas 实现的项目， 比如canvas 实现思维导图 <strong>xmind</strong> ， canvas 实现一个<strong>绘图工具</strong>。 然后呢无论是哪一个，其实背后都是在canavs 背后实现了一套事件系统，可惜这些源码都不开源。所以本着学习的激情， 我参考了一些文章实现一个简单事件系统。本篇文章你可以学到下面👇这些内容</p> <ol><li>我是怎么基于canvas去<strong>构建基础框架</strong>的</li> <li>几何算法—— <strong>判断点是不是任意多边形内部</strong></li> <li>如何进行<strong>事件分发</strong>和<strong>阻止事件冒泡</strong></li></ol> <p>本篇文章我全是干货。欢迎点赞、关注、收藏。</p> <h1 id="基础框架的搭建"><a href="#基础框架的搭建" class="header-anchor">#</a> 基础框架的搭建</h1> <h2 id="图形类"><a href="#图形类" class="header-anchor">#</a> 图形类</h2> <p>第一步我要做的事就是进行概念抽象，大家去想一下，canvas本质是一层画布，然后画布上很多图形，有长方形、圆形、以及任意闭合的多边形.  从面向对象的角度考虑的话， 我们可以封装一个基类 —— <strong>shape</strong>  每个图形是不是都在canvas 去显示，所以都应该有一个</p> <p>draw 方法， 还有一个方法就是判断鼠标的点 是不是在当前图形的内部，这个我我们后面在讨论吧。 然后每个图形有自己的特有的属性，结合canvas 的api 去设置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props
  <span class="token punctuation">}</span>

  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 判断鼠标的点是否在图形内部</span>
  <span class="token function">isPointInClosedRegion</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Rect</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props
  <span class="token punctuation">}</span>
  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 判断鼠标的点是否在图形内部</span>
  <span class="token function">isPointInClosedRegion</span><span class="token punctuation">(</span><span class="token parameter">mouse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面两个图形看结构都是一样的，不一样的<strong>draw</strong>方法,  我给你1分钟时间思考🤔下，canvas 是如何画矩形和画圆的。 其实 就是两个api一个 <strong>arc</strong>一个<strong>rect</strong> 然后 你传入对应的参数就好了。这里没什么， 不知道的同学可以去MDN去看下， 我已经讲了很多篇了。我就直接给出代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> center<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> fillColor <span class="token operator">=</span> <span class="token string">'black'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> center
ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillColor
ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>这是圆的， save 和 restore 的方法 妙处 就是 比如我给圆设置红色 ，如果我再去画矩形， 矩形也会变成红色， 这样就不可控了，圆的话就是 圆心 加 半径，加填充颜色。</p> <p>看完圆的我们在看下矩形的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> leftTop<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> fillColor <span class="token operator">=</span> <span class="token string">'black'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> leftTop
ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillColor
ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>矩形的属性 一个左上角的点一个长度，一个宽度。ok ,到这里图形基本搭建完成，下面开始搭建画布类</p> <h2 id="画布类"><a href="#画布类" class="header-anchor">#</a> 画布类</h2> <p>画布类的目前做的事情非常简单哈，初始化一些属性。首先他有个add() 方法，去往画布增加各个图形。增加的图形，每一个图形内部都去实现了<strong>draw</strong> 方法。这样实现了往canvas 加图形的操作哈。直接看代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 新建一个画布类</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Canvas</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    shape<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>shape<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>是不是很简单，我们写一些代码测试下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Canvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  center<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  fillColor<span class="token operator">:</span> <span class="token string">'green'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  leftTop<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  width<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  fillColor<span class="token operator">:</span> <span class="token string">'black'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 添加</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rect<span class="token punctuation">)</span>
</code></pre></div><p>这样写代码是不是感觉十分的舒服， 很清除， 可读性非常的高哇</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815192814301.png" alt="画布创建"></p> <p>OK，看来我们写的代码是没有问题的，下面写一个稍微复杂的图形，任意点组成的闭合<strong>polygon</strong></p> <h2 id="polygon类"><a href="#polygon类" class="header-anchor">#</a> polygon类</h2> <p>同样是也是有draw 和 isPointInClosedRegion 这个两个方法， 画图的这个方法呢， 属性就是一堆2d点， 第一个点是移动画笔🖌， 其余的点调用canvas <strong>lineTo</strong>的方法。 然后 闭合区域就好了 。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Polygon</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token operator">=</span> props
  <span class="token punctuation">}</span>
  <span class="token function">draw</span><span class="token punctuation">(</span><span class="token parameter">ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> points<span class="token punctuation">,</span> fillColor <span class="token operator">=</span> <span class="token string">'black'</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> fillColor
    points<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">point<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> point
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">getDispersed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>points
  <span class="token punctuation">}</span>

  <span class="token function">isPointInClosedRegion</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>测试的话，我是随机在画布取了5个点， 我用了我之前写的<strong>Point2d</strong>类， 上有个random方法， 传入canvas 的长度和宽度。不清楚的同学看看我之前写 <strong>canvas实现点的移动</strong>， 那里 我有详细介绍过。测试代码如下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  points<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Point2d<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> shape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Polygon</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  points<span class="token punctuation">,</span>
  fillColor<span class="token operator">:</span> <span class="token string">'orange'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 添加到画布中</span>
canvas<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>shape<span class="token punctuation">)</span>
</code></pre></div><p>我们看下结果：</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815194130841.png" alt="三个图形"></p> <h2 id="基类shape"><a href="#基类shape" class="header-anchor">#</a> 基类shape</h2> <p>写到这里就有人问到， 这个三个类 都继承 基类 shape, shape 有什么通用的能力呢？ 这里开始到我们本文的主题了， 就是每个图形的是不是有监听事件， 事件有很多种类型。每个类型下肯定有一大堆的监听函数， OK ，首先这是大家通用的能力， 或者是大家都需要的额东西， 我们就把放在基类中就好了， 那么我们用什么数据结构去存储呢—— 这种key Value 一看就是用<strong>Map</strong>, 行吧我们看下代码吧：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 图形的基类</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>listenerMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> listener</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>listenerMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>eventName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>listenerMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>eventName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>listenerMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> <span class="token punctuation">[</span>listener<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>On 这个方法哈， 第一个参数是事件名字， 第二个参数就是listener了， OK到目前为止， 每个图形对应的事件，都有了listener。</p> <h1 id="事件分发"><a href="#事件分发" class="header-anchor">#</a> 事件分发</h1> <p>这个小节，就是将所有canvas 绑定的事件，传递到每个图形上去。第一步哈，我们首先为<strong>canvas</strong> 绑定监听函数。</p> <blockquote><p>小Tips： 为canvas 增加键盘事件的时候，需要给canvas 增加一个属性 <strong>tabinex = 0</strong> , 不然 绑定无效。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>move<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleEvent</span><span class="token punctuation">(</span>move<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>click<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleEvent</span><span class="token punctuation">(</span>click<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Move 和click 是我定义个两个常量哈：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> move <span class="token operator">=</span> <span class="token string">'mousemove'</span><span class="token keyword">export</span> <span class="token keyword">const</span> click <span class="token operator">=</span> <span class="token string">'mousedown'</span>
</code></pre></div><p>handleEvent 这个方法 用到了函数式编程， 将事件名字 和逻辑 进行解耦哇。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">handleEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token comment">// 获取当前事件的所有监听者      const listerns = shape.listenerMap.get(name)      if ( listerns ) {        listerns.forEach((listener) =&gt; listener(event))      }    })  }</span>
</code></pre></div><p>这样其实就实现了事件的分发，我们来测试下：</p> <div class="language-js extra-class"><pre class="language-js"><code>circle<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>click<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">//event.isStopBubble = true  console.log(event, 'circle')})rect.on(click, (event) =&gt; {  console.log(event, 'rect')})</span>
</code></pre></div><p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%82%B9%E5%87%BB.gif" alt="事件系统点击"></p> <p>不知道大家有没有发现问题， 虽然我们实现了事件分发，但是存在一个<strong>问题</strong>，我在画布上任意一点击， 都会触发，可能其实我点击的根本不在我画的图形内部。所以我们进行事件分发的时候，还要判断下鼠标的点 是不是在闭合的区域内部。所以说呢，每一个shape 内部都要去实现 <strong>isPointInClosedRegion</strong>  这个方法。</p> <h2 id="圆的实现"><a href="#圆的实现" class="header-anchor">#</a> 圆的实现</h2> <p>判断一个点是不是在于圆内，这个其实很简单，主要去比<strong>较 鼠标的点 和圆心的距离 与 半径做比较</strong>，然后就可以判断了哈， 这个没什么。直接上代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> center<span class="token punctuation">,</span> radius <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>propsreturn mouse<span class="token punctuation">.</span>point<span class="token punctuation">.</span><span class="token function">distance</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> radius <span class="token operator">*</span> radius
</code></pre></div><h2 id="矩形的实现"><a href="#矩形的实现" class="header-anchor">#</a> 矩形的实现</h2> <p>判断一个点是不是在矩形内， 这里其实有个包围盒的概念，但是矩形 本来就是方方正正的，所以第一部根据， 左上角的点，算出矩形的minX， minY, maxX,maxY 然后 去拿鼠标的点去比较就好了。 这里我给大家画个图：</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815202206407.png" alt="矩形的包围盒"></p> <p>看到这张图应该不用说什么了， 直接上代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token comment">// 判断鼠标的点是否在图形内部  isPointInClosedRegion(mouse) {    const { x, y } = mouse.point    const { leftTop, width, height } = this.props    const { x: minX, y: minY } = leftTop    const maxX = minX + width    const maxY = minY + height    if (x &gt;= minX &amp;&amp; x &lt;= maxX &amp;&amp; y &gt;= minY &amp;&amp; y &lt;= maxY) {      return true    }    return false  }</span>
</code></pre></div><h1 id="点在任意多边形内-算法"><a href="#点在任意多边形内-算法" class="header-anchor">#</a> 点在任意多边形内（算法）</h1> <p>简单的图形我们可以通过一个数学关系去比较，但是复杂的多边形呢， 多边形分为 <strong>凹多边形</strong> 和<strong>凸多边形</strong>。那我们该怎么去解决呢？社区有下面几种方法：</p> <ol><li><strong>引射线法</strong>：从目标点出发引一条射线，看这条射线和多边形所有边的交点数目。如果有奇数个交点，则说明在内部，如果有偶数个交点，则说明在外部。</li> <li><strong>面积和判别法</strong>：判断目标点与多边形的每条边组成的三角形面积和是否等于该多边形，相等则在多边形内部。</li></ol> <p>具体做法：将测试点的Y坐标与多边形的每一个点进行比较，会得到一个测试点所在的行与多边形边的交点的列表。在下图的这个例子中有8条边与测试点所在的行相交，而有6条边没有相交。如果测试点的两边点的个数都是奇数个则该测试点在多边形内，否则在多边形外。在这个例子中测试点的左边有5个交点，右边有三个交点，它们都是奇数，所以点在多边形内。</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815203222867.png" alt="example"></p> <p><strong>这里有人会问为什么奇数是在内部， 偶数是在外部呢？</strong></p> <p>我以最简单的例子，带你去解释为什么？这时候又到了， 画图时刻：</p> <p>我们先从内部选一个点，然后向任意方向发出一条射线。 你会发现一个问题，我们射线第一次与直线相交 叫做  <strong>穿入</strong>， 后面再相交 叫做<strong>穿出</strong>， 你会发现内部的最后永远是穿入，没有穿出， 但是外部的点， 永远穿入的同时， 然后穿出。最后永远是<strong>穿出</strong></p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815215039500.png" alt="内部的点"></p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815215142806.png" alt="外部的点"></p> <h2 id="算法实现"><a href="#算法实现" class="header-anchor">#</a> 算法实现</h2> <p>这里涉及到一个主要的算法就是 线段 和线段求<strong>焦点</strong>。我们新建一个<strong>Seg2d</strong>的类 线段肯定是有两个端点：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Seg2d</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span> end</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints <span class="token operator">=</span> <span class="token punctuation">[</span>start<span class="token punctuation">,</span> end<span class="token punctuation">]</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_asVector <span class="token operator">=</span> <span class="token keyword">undefined</span>  <span class="token punctuation">}</span>  <span class="token keyword">get</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token keyword">get</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Seg2d</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Seg2d</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>start<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>end<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">get</span> <span class="token function">asVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>_asVector <span class="token operator">||</span>      <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_asVector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>endPoints<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y      <span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p>这都是基本操作没什么好讲的， 主要在类上 实现了 两个静态方法</p> <ol><li>多个点转成线段</li> <li>线段和线段相交</li></ol> <p>我先来讲第一个，因为我们我们传给任意多边形的就是 点的集合， 所以，我们得将这些点连成线段组成闭合区域。</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token comment">//一堆点 获得闭合一堆线段  static getSegments(points, closed = false) {    const list = []    for (let i = 1; i &lt; points.length; i++) {      list.push(new Seg2d(points[i - 1], points[i]))    }    if (closed &amp;&amp; !points[0].equal(points[points.length - 1])) {      list.push(new Seg2d(points[points.length - 1], points[0]))    }    return list  }</span>
</code></pre></div><p>Closed 这个参数， 因为区域是满足一个方向的。所以闭合区域 肯定是首尾相连的。</p> <h2 id="线段和线段求焦点"><a href="#线段和线段求焦点" class="header-anchor">#</a> 线段和线段求焦点</h2> <ol><li><strong>列方程求两个直线的焦点</strong></li> <li><strong>判断每一条线段的两个端点是否都在另一条线段的两侧, 是则求出两条线段所在直线的交点, 否则不相交.</strong></li></ol> <p>这里我们用第二种方法去实现 ：</p> <p>第一步判断两个点是否在某条线段的两侧, 通常可采用投影法:</p> <p>求出线段的法线向量, 然后把点投影到法线上, 最后根据投影的位置来判断点和线段的关系. 见下图</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210815221634329.png" alt="投影图"></p> <p>点a和点b在线段cd法线上的投影如图所示, 这时候我们还要做一次线段cd在自己法线上的投影(选择点c或点d中的一个即可).
主要用来做参考.
图中点a投影和点b投影在点c投影的两侧, 说明线段ab的端点在线段cd的两侧.</p> <p>同理, 再判断一次cd是否在线段ab两侧即可.</p> <p>求法线 , 求投影 什么的听起来很复杂的样子,  皆有公式可循:</p> <div class="language- extra-class"><pre class="language-text"><code>const nx=b.y - a.y,       ny=a.x - b.x;  const normalLine = {  x: nx, y: ny };  
</code></pre></div><p>求点c在法线上的投影位置:</p> <div class="language- extra-class"><pre class="language-text"><code>const dist= normalLine.x*c.x + normalLine.y*c.y;  
</code></pre></div><p><strong>注意: 这里的&quot;投影位置&quot;是一个标量, 表示的是到法线原点的距离, 而不是投影点的坐标.</strong></p> <p>当我们把图中 点a投影(distA),点b投影(distB),点c投影(distC) 都求出来之后, 就可以很容易的根据各自的大小判断出相对位置.</p> <p>distA==distB==distC 时, 两条线段共线
distA==distB!=distC 时, 两条线段平行
distA 和 distB 在distC 同侧时, 两条线段不相交.
distA 和 distB 在distC 异侧时, 两条线段是否相交需要再判断点c点d与线段ab的关系.</p> <p>这个优化 就优化在这里， 回去做一层检测， 然后再去求焦点， 求焦点用的也是固定公式。 我给出下面实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">static</span> <span class="token function">lineLineIntersect</span><span class="token punctuation">(</span><span class="token parameter">line1<span class="token punctuation">,</span> line2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> a <span class="token operator">=</span> line1<span class="token punctuation">.</span>start    <span class="token keyword">const</span> b <span class="token operator">=</span> line1<span class="token punctuation">.</span>end    <span class="token keyword">const</span> c <span class="token operator">=</span> line2<span class="token punctuation">.</span>start    <span class="token keyword">const</span> d <span class="token operator">=</span> line2<span class="token punctuation">.</span>end    <span class="token keyword">const</span> interInfo <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment">//线段ab的法线N1    const nx1 = b.y - a.y,      ny1 = a.x - b.x    //线段cd的法线N2    const nx2 = d.y - c.y,      ny2 = c.x - d.x    //两条法线做叉乘, 如果结果为0, 说明线段ab和线段cd平行或共线,不相交    const denominator = nx1 * ny2 - ny1 * nx2    if (denominator == 0) {      return interInfo    }    //在法线N2上的投影    const distC_N2 = nx2 * c.x + ny2 * c.y    const distA_N2 = nx2 * a.x + ny2 * a.y - distC_N2    const distB_N2 = nx2 * b.x + ny2 * b.y - distC_N2    // 点a投影和点b投影在点c投影同侧 (对点在线段上的情况,本例当作不相交处理);    if (distA_N2 * distB_N2 &gt;= 0) {      return interInfo    }    //    //判断点c点d 和线段ab的关系, 原理同上    //    //在法线N1上的投影    const distA_N1 = nx1 * a.x + ny1 * a.y    const distC_N1 = nx1 * c.x + ny1 * c.y - distA_N1    const distD_N1 = nx1 * d.x + ny1 * d.y - distA_N1    if (distC_N1 * distD_N1 &gt;= 0) {      return interInfo    }    //计算交点坐标    const fraction = distA_N2 / denominator    const dx = fraction * ny1,      dy = -fraction * nx1    interInfo.push(new Point2d(a.x + dx, a.y + dy))    return interInfo  }</span>
</code></pre></div><p>这个ok 之后，我们去把任意多边形的方法的是否在闭合区域内的方法去实现。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">isPointInClosedRegion</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> allSegs <span class="token operator">=</span> Seg2d<span class="token punctuation">.</span><span class="token function">getSegments</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDispersed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>    <span class="token comment">// 选取任意一条射线    const start = event.point    const xAxias = new Point2d(1, 0).multiplyScalar(800)    const end = start.clone().add(xAxias)    const anyRaySeg = new Seg2d(start, end)    let total = 0    allSegs.forEach((item) =&gt; {      const intersetSegs = Seg2d.lineLineIntersect(item, anyRaySeg)      total += intersetSegs.length    })    // 奇数在内部    if (total % 2 === 1) {      return true    }    return false  }</span>
</code></pre></div><p>任意射线，我以鼠标的点，作为起始点， 方向是X轴， 算出终点。  然后得到任意线段。去和所有线段 去求焦点。  统计焦点个数， 来确定是不是在内部。</p> <p>OK， 这时候我们吧触发事件的条件改写下。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">handleEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token comment">// 获取当前事件的所有监听者      const listerns = shape.listenerMap.get(name)      if (        listerns &amp;&amp;        shape.isPointInClosedRegion(event)      ) {        listerns.forEach((listener) =&gt; listener(event))      }    })  }</span>
</code></pre></div><p>这样其实就已经实现了，在区域内部实现事件触发了。 看下gif<img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/Aug-15-2021%2022-40-59.gif" alt="区域内部点击"></p> <p>一开始点击的是空白处，然后我分别点了 polygon 和 矩形 和圆形 ，看控制台 你能看到结果。说明我们的算法实现成功了。</p> <h1 id="阻止事件冒泡"><a href="#阻止事件冒泡" class="header-anchor">#</a> 阻止事件冒泡</h1> <p>这时候有同学又要问了，<strong>我点击两个图形相交的部分，我只想选中内部的， 外面的不想选中</strong>。 这是个很正常的需求，首先原生的event 肯定已经满足不了我们了， 解决这个问题就是，分发到这个图形的时候不去触发的所有listeners。不就搞定了。所以我重写了event,其实 也没什么，也就做了两件事</p> <ol><li>第一件事就是将鼠标的点 转为 point2d</li> <li>增加一个属性isStopBubble  来阻止冒泡</li></ol> <p>代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">getNewEvent</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2d</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>offsetX<span class="token punctuation">,</span> event<span class="token punctuation">.</span>offsetY<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      point<span class="token punctuation">,</span>      isStopBubble<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>      <span class="token operator">...</span>event<span class="token punctuation">,</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>
</code></pre></div><p>我这样的实现的依据是 图形的增加到场景是有序的。这里和大家说下React 事件系统， 由于有Vdom的存在，所以他将事件监听到 document 上， 然后再去按照顺序，去收集所有的lsiteners。 事件的捕获 和冒泡 其实 就是一个 顺序 和倒叙的问题。 他是这么去实现的。  他阻止合成事件冒泡， 就是合成事件有个e.stopPropagation() 。由于我们canvas 没有dom这个概念，所以我们人为封装了一个属性，并且将event传给每个图形 有他们控制 是否阻止。看代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function-variable function">handleEvent</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    event <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getNewEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>allShapes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">shape</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token comment">// 获取当前事件的所有监听者      const listerns = shape.listenerMap.get(name)      if (        listerns &amp;&amp;        shape.isPointInClosedRegion(event)        &amp;&amp; !event.isStopBubble      ) {        listerns.forEach((listener) =&gt; listener(event))      }    })  }</span>
</code></pre></div><p>主要是加了个条件。我们来测试下：</p> <p>没阻止，我点击公共区域。</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/%E6%B2%A1%E5%86%92%E6%B3%A1.gif" alt="没阻止冒泡"></p> <p>阻止冒泡， 代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>circle<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>click<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  event<span class="token punctuation">.</span>isStopBubble <span class="token operator">=</span> <span class="token boolean">true</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">'circle'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>rect<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>click<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token string">'rect'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如图：</p> <p><img src="https://ztifly.oss-cn-hangzhou.aliyuncs.com/%E9%98%BB%E6%AD%A2%E5%86%92%E6%B3%A1.gif" alt="阻止冒泡"></p> <h1 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h1> <p>本篇文章大概就是简单的实现了canvas 的<strong>事件系统</strong>了，水平有限，能表达的就这么多。如果有更好的欢迎补充学习和交流，文章有错误的欢迎指正。我是热爱图形的Fly，我们下次再见👋啦。 最后觉得看完对你有帮助的话，点赞👍 再走吧。 知识输出不容易，我会持续持续输出高质量文章的。</p> <h1 id="资源获得"><a href="#资源获得" class="header-anchor">#</a> 资源获得</h1> <p>如果对你有帮助的话，可以关注公众号**【前端图形】**，回复 <strong>【事件】</strong> 可以获得全部源码。</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上一次更新时间: </span> <span class="time">2021/12/26 下午6:37:38</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/learn-visualization/blog/canvas/2d-aoyun.html" class="prev">
            canvas——奥运金牌🏅数据可视化
          </a></span> <span class="next"><a href="/learn-visualization/blog/canvas/2d-undo.html">
            canvas——实现undoRedo
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#图形类" class="sidebar-link reco-side-图形类" data-v-cb1513f6>图形类</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#画布类" class="sidebar-link reco-side-画布类" data-v-cb1513f6>画布类</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#polygon类" class="sidebar-link reco-side-polygon类" data-v-cb1513f6>polygon类</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#基类shape" class="sidebar-link reco-side-基类shape" data-v-cb1513f6>基类shape</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#圆的实现" class="sidebar-link reco-side-圆的实现" data-v-cb1513f6>圆的实现</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#矩形的实现" class="sidebar-link reco-side-矩形的实现" data-v-cb1513f6>矩形的实现</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#算法实现" class="sidebar-link reco-side-算法实现" data-v-cb1513f6>算法实现</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-visualization/blog/canvas/2d-event.html#线段和线段求焦点" class="sidebar-link reco-side-线段和线段求焦点" data-v-cb1513f6>线段和线段求焦点</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/learn-visualization/assets/js/app.b91ad8ae.js" defer></script><script src="/learn-visualization/assets/js/3.17508fe9.js" defer></script><script src="/learn-visualization/assets/js/1.cf7fd066.js" defer></script><script src="/learn-visualization/assets/js/14.06574b25.js" defer></script>
  </body>
</html>
