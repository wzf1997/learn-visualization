(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{569:function(t,s,a){"use strict";a.r(s);var n=a(12),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("é¦–å…ˆä»‹ç»ä¸‹canvasï¼Œ å‰ç«¯çš„åŒå­¦å¯èƒ½å¾ˆç†Ÿæ‚‰ï¼Œä¸¾ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼Œ å¹³å¸¸ç”¨çš„ç½‘é¡µæˆªå›¾ã€H5æ¸¸æˆã€å‰ç«¯åŠ¨æ•ˆã€å¯è§†åŒ–å›¾è¡¨...,éƒ½æœ‰canvas çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®˜æ–¹çš„å®šä¹‰ï¼š")]),t._v(" "),a("blockquote",[a("p",[t._v("canvasæ˜¯HTML5æä¾›çš„ä¸€ç§æ–°æ ‡ç­¾, ie9æ‰å¼€å§‹æ”¯æŒçš„ï¼Œcanvasæ˜¯ä¸€ä¸ªçŸ©å½¢åŒºåŸŸçš„ç”»å¸ƒï¼Œå¯ä»¥ç”¨JSæ§åˆ¶æ¯ä¸€ä¸ªåƒç´ åœ¨ä¸Šé¢ç»˜ç”»ã€‚canvas æ ‡ç­¾ä½¿ç”¨ JavaScript åœ¨ç½‘é¡µä¸Šç»˜åˆ¶å›¾åƒï¼Œæœ¬èº«ä¸å…·å¤‡ç»˜å›¾åŠŸèƒ½ã€‚canvas æ‹¥æœ‰å¤šç§ç»˜åˆ¶è·¯å¾„ã€çŸ©å½¢ã€åœ†å½¢ã€å­—ç¬¦ä»¥åŠæ·»åŠ å›¾åƒçš„æ–¹æ³•ã€‚")])]),t._v(" "),a("p",[t._v("çœ‹ç€å¾ˆç®€å•ï¼Œå…¶å®canvasè¿™ä¸ªæ ‡ç­¾çš„åŠ å…¥ï¼Œèµ‹äºˆäº†æˆ‘ä»¬æ›´å¤šåˆ›å»ºæƒŠè‰³çš„å‰ç«¯æ•ˆæœçš„èƒ½åŠ›ã€‚ä½†æ˜¯ä½ çŸ¥é“ä»–ä¹Ÿæœ‰æ€§èƒ½é—®é¢˜ï¼Ÿï¼Ÿæœ¬ç¯‡æ–‡ç« å°±ç®€å•è°ˆä¸€è°ˆcanvasçš„æ€§èƒ½ä¼˜åŒ–ã€‚")]),t._v(" "),a("h1",{attrs:{id:"å‰è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),a("p",[t._v("å¥½äº†ç°åœ¨è¿›å…¥ä»Šå¤©çš„ä¸»é¢˜ï¼š "),a("strong",[t._v("canvas æ€§èƒ½ä¼˜åŒ–")]),t._v("ï¼Œ è¯»å®Œæœ¬ç¯‡æ–‡ç« ä½ å¯ä»¥å­¦åˆ°ä¸‹é¢ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("å“ªäº›å› ç´ ä¼šå½±å“canvasçš„æ€§èƒ½")]),t._v(" "),a("li",[t._v("canvasä¼˜åŒ–çš„å‡ ç§æ–¹å¼")])]),t._v(" "),a("h1",{attrs:{id:"åˆ°åº•æ˜¯ä»€ä¹ˆå› ç´ å½±å“äº†canvas"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ°åº•æ˜¯ä»€ä¹ˆå› ç´ å½±å“äº†canvas"}},[t._v("#")]),t._v(" åˆ°åº•æ˜¯ä»€ä¹ˆå› ç´ å½±å“äº†canvas")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬éƒ½çŸ¥é“æµè§ˆå™¨ä¸Šæ¸²æŸ“åŠ¨ç”» æ¯ä¸€ç§’é«˜è¾¾60å¸§ï¼Œä¹Ÿå°±æ˜¯1ç§’é’Ÿå†…æˆ‘ä»¬å®Œæˆ60æ¬¡å›¾åƒç»˜åˆ¶ï¼Œ ä¹Ÿå°±æ˜¯æ¯ä¸€å¸§å›¾åƒçš„ç»˜åˆ¶æ—¶é—´å…¶å®å°±æ˜¯ï¼ˆ1000/ 60)ã€‚ å¦‚æœåœ¨æ¯ä¸€å¸§åŠ¨ç”»çš„æ—¶é—´å°äº 16.7 ms è¾£ä¹ˆå°±ä¼šå‡ºç°å¡é¡¿ã€ä¸¢å¸§ã€‚è€Œcanvas å…¶å®æ˜¯ä¸€ä¸ª"),a("strong",[t._v("æŒ‡ä»¤å¼ç»˜å›¾ç³»ç»Ÿ")]),t._v("ï¼Œ ä»–é€šè¿‡ç»˜å›¾æŒ‡ä»¤æ¥å®Œæˆç»˜å›¾æ“ä½œã€‚ é‚£ä¹ˆå¾ˆå®¹æ˜“æƒ³åˆ°ä¸¤ä¸ªå¾ˆå…³é”®çš„å› ç´ ï¼š")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("ç»˜åˆ¶å›¾å½¢çš„ä¸ªæ•°")])]),t._v(" "),a("li",[a("strong",[t._v("ç»˜åˆ¶å›¾å½¢çš„å¤§å°")])])]),t._v(" "),a("p",[t._v("å¾ˆå®¹æ˜“ç†è§£ï¼Œå‡è®¾ç»˜åˆ¶ ç»˜åˆ¶ä¸€ä¸ªå›¾å½¢ å‡ æ¯«ç§’ é‚£ä¹ˆå¦‚æœç»˜åˆ¶10000ä¸ªå›¾å½¢å‘¢ï¼Ÿï¼Ÿ è‚¯å®šæ—¶é—´å°±é•¿äº†ï¼Œ å¦‚æœåé¢å…¶ä»–æ“ä½œã€uiäº¤äº’ã€æ¸²æŸ“å…¶ä»–å›¾å½¢... è¿™å°±ä¼šå¯¼è‡´æ¸²æŸ“çš„æ—¶é—´æ¯”è¾ƒé•¿äº†ã€‚canvas ç»˜åˆ¶çš„å›¾åƒéƒ½æ˜¯ä¸€ä¸ªä¸ªå°åƒç´ ç‚¹æ„æˆçš„ã€ ä½ ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º5 çš„åœ† å’ŒåŠå¾„ä¸º1000çš„åœ†æ‰€éœ€è¦çš„åƒç´ ç‚¹ è‚¯å®šæ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™é‡Œç»™å¤§å®¶çœ‹ä¸€å¼ å›¾æ¸…æ™°çš„æ˜ç™½ä¸€ä¸ªç»˜åˆ¶çš„æ„æˆã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/640-20211024195523266.gif",alt:"å›¾ç‰‡"}})]),t._v(" "),a("p",[t._v("ä½ å›¾å½¢æ•°é‡è¶Šå¤§éœ€è¦çš„åƒç´ ç‚¹å°±è¶Šå¤šï¼Œé‚£ä¹ˆ ç‰‡å…ƒç€è‰²å™¨å°±è¦ä¸æ–­çš„å»æ‰§è¡Œã€‚")]),t._v(" "),a("p",[t._v("æˆ‘å†™äº†"),a("strong",[t._v("ä¸¤ä¸ªå°demo")]),t._v(" æ¥éªŒè¯æˆ‘ä»¬çš„çŒœæƒ³ï¼Œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œå“‡ï¼")]),t._v(" "),a("h1",{attrs:{id:"ç»˜åˆ¶å›¾å½¢çš„ä¸ªæ•°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»˜åˆ¶å›¾å½¢çš„ä¸ªæ•°"}},[t._v("#")]),t._v(" ç»˜åˆ¶å›¾å½¢çš„ä¸ªæ•°")]),t._v(" "),a("p",[t._v("ä¸»è¦æ˜¯ç»˜åˆ¶100ä¸ª å’Œç»˜åˆ¶10000ä¸ªå°çƒä½œå¯¹æ¯”")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å…ˆçœ‹ä¸‹ä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" canvas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WIDTH")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HEIGHT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height\n\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rgb( '")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("' )'")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawCirle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("radius "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WIDTH")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HEIGHT")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("randomColor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("arc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" radius"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("draw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawCirle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("WIDTH")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HEIGHT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("draw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("update"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"ç»˜åˆ¶100ä¸ª"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»˜åˆ¶100ä¸ª"}},[t._v("#")]),t._v(" ç»˜åˆ¶100ä¸ª")]),t._v(" "),a("p",[t._v("ç»˜åˆ¶100 ä¸ªå°çƒçš„fps è¿˜æ˜¯èƒ½å¤Ÿç¨³å®šåœ¨30fps çš„å¦‚å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/100%E4%B8%AA.gif",alt:"100ä¸ª"}})]),t._v(" "),a("h2",{attrs:{id:"ç»˜åˆ¶10000ä¸ª"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»˜åˆ¶10000ä¸ª"}},[t._v("#")]),t._v(" ç»˜åˆ¶10000ä¸ª")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/10000%E4%B8%AA.gif",alt:"100ä¸ª"}})]),t._v(" "),a("p",[t._v("ç»˜åˆ¶10000ä¸ªå°çƒçš„fps æ‰å¸§çš„å‰å®³ æ˜¯çœŸçš„å¡ã€‚ æ‰€ä»¥ä¹Ÿå°±éªŒè¯äº†æˆ‘ä»¬çš„çŒœæƒ³ ï¼Œcanvas çš„æ€§èƒ½æ˜¯å’Œç»˜åˆ¶å›¾å½¢ä¸ªæ•°æœ‰å…³ç³»çš„")]),t._v(" "),a("p",[t._v("è¿™ä¸ªfps å¸§ç‡æ˜¾ç¤ºå™¨æ˜¯ chrome è‡ªå¸¦çš„  è¾“å…¥ command + shift + p  æœç´¢ğŸ” render fps è‡ªç„¶å°±æ‰¾åˆ°äº†ã€‚")]),t._v(" "),a("h1",{attrs:{id:"ç»˜åˆ¶å›¾å½¢çš„å¤§å°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»˜åˆ¶å›¾å½¢çš„å¤§å°"}},[t._v("#")]),t._v(" ç»˜åˆ¶å›¾å½¢çš„å¤§å°")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å†æ¥éªŒè¯ç»˜åˆ¶å›¾å½¢çš„å¤§å°ä¼šä¸ä¼šå½±å“fps ã€‚æˆ‘å°†å°çƒçš„æ•°é‡æ”¹æˆ1000ï¼Œ åŠå¾„æ”¹æˆ10 ã€‚")]),t._v(" "),a("p",[t._v("ç›®å‰çš„"),a("strong",[t._v("å°çƒçš„æ•°é‡ æ˜¯1000")]),t._v(" ï¼Œ "),a("strong",[t._v("åŠå¾„å¤§å°æ˜¯10")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çœ‹ä¸‹gif å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/Oct-24-2021%2020-23-40.gif",alt:"Oct-24-2021 20-23-42"}})]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çœ‹åˆ°å¸§ç‡å¤§æ¦‚æ˜¯ç¨³å®šåœ¨30fps çš„ï¼Œ è¿™æ—¶å€™ æ•°é‡ä¸å˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘å°†å°çƒçš„åŠå¾„æ”¹æˆ200ï¼Œ æˆ‘ä»¬åœ¨çœ‹ä¸‹å¸§ç‡å˜åŒ–ï¼Œç„¶åå‘¢ ä½ ä¼šçœ‹åˆ°å¸§ç‡æœ‰è¾ƒä¸ºæ˜æ˜¾çš„ä¸‹è·Œã€‚ å¦‚å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/Oct-24-2021%2020-24-16.gif",alt:"Oct-24-2021 20-24-16"}})]),t._v(" "),a("p",[t._v("æ‰€ä»¥æ€»ç»“ä»¥ä¸Šæ¥çœ‹ï¼Œå½±å“canvasçš„å› ç´ å°±æ˜¯æœ‰ä»¥ä¸Šä¸¤ç‚¹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("ç¬¬ä¸€ä¸ªæ¸²æŸ“çš„å›¾å½¢æ•°é‡")]),t._v(" "),a("li",[t._v("ç¬¬äºŒä¸ªå°±æ˜¯æ¸²æŸ“å›¾å½¢çš„å¤§å°")])]),t._v(" "),a("p",[t._v("å…¶å®æˆ‘æ¥æ·±åº¦åˆ†æï¼Œ "),a("strong",[t._v("ç¬¬ä¸€ä¸ªæ¸²æŸ“çš„å›¾å½¢æ•°é‡å¤šï¼Œå°±æ˜¯è°ƒç”¨ç»˜å›¾æŒ‡ä»¤çš„æ¬¡æ•°æ¯”è¾ƒå¤šï¼Œ")])]),t._v(" "),a("p",[a("strong",[t._v("ç¬¬äºŒä¸ªæ¸²æŸ“çš„å›¾å½¢å¤§ï¼Œå°±æ˜¯ä¸€æ¬¡ç»˜å›¾æ¸²æŸ“çš„æ—¶é—´æ¯”è¾ƒé•¿")])]),t._v(" "),a("p",[a("strong",[t._v("ç„¶åä¸‹é¢æˆ‘å°±å¼€å§‹ä¼˜åŒ–canvas")])]),t._v(" "),a("h1",{attrs:{id:"å‡å°‘ç»˜å›¾æŒ‡ä»¤çš„è°ƒç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‡å°‘ç»˜å›¾æŒ‡ä»¤çš„è°ƒç”¨"}},[t._v("#")]),t._v(" å‡å°‘ç»˜å›¾æŒ‡ä»¤çš„è°ƒç”¨")]),t._v(" "),a("p",[t._v("è¿™å¥è¯æ€ä¹ˆç†è§£å‘¢ ï¼Œ å‡è®¾ä½ è¦åœ¨åœºæ™¯ä¸­ç”»æ­£nå˜å½¢ï¼Œè¿™æ˜¯ä¸€ä¸ª å¾ˆå¸¸è§çš„éœ€æ±‚å¯èƒ½ä½ ç¨ä¸æ³¨æ„å†™ä¸‹äº†ä¸‹é¢è¿™å‡ è¡Œä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawAnyShape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("points")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'black'")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moveTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("p1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("closePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stroke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("points å¯¹åº”çš„ç”Ÿæˆå¤šè¾¹å½¢çš„ç‚¹ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generatePolygon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("y"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" edges "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" points "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" detla "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" edges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("edges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" theta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" detla"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" r "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("theta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" y "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" r "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("theta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" points \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("p",[t._v("ä¸»è¦æ˜¯æ ¹æ®ä¸€ä¸ªåœ†å¿ƒï¼Œæ ¹æ®è¾¹æ•°ç”Ÿæˆå¯¹åº”çš„ç‚¹ã€‚")]),t._v(" "),a("p",[t._v("ä¹ä¸€çœ‹è¿™ä»£ç æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œç”Ÿæˆä¸€ä¸ªæ­£å¤šè¾¹å½¢ï¼Œ è¿™æ—¶å€™æˆ‘åœ¨é¡µé¢ä¸Šç”»äº†1000ä¸ªæ­£å¤šè¾¹å½¢ï¼š å¦‚ä¸‹å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/%E4%BC%98%E5%8C%96%E5%89%8D.gif",alt:"ä¼˜åŒ–å‰"}})]),t._v(" "),a("p",[t._v("ä¸€çœ‹è¿™fpsä½æˆè¿™ä¸ªæ ·å­ï¼Œå¾ˆå¤šäººè¿™æ—¶å€™è¯´ï¼Œä½ ç”»çš„å›¾å½¢å¤šï¼Œé‚£æˆ‘åªè¦æ‚„æ‚„çš„æ”¹ä¸‹ä»£ç ï¼Œå°±èƒ½è®©fps å›å½’æ­£å¸¸")]),t._v(" "),a("p",[t._v("æˆ‘åˆé‡å†™äº†æ­£å¤šè¾¹å½¢çš„æ–¹æ³•ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawAnyShape2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("points")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moveTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'black'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lineTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("points"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("closePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stroke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("æˆ‘ä»¬çœ‹ä¸‹è¿™æ—¶å€™çš„fps å¸§ç‡ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/%E4%BC%98%E5%8C%96%E5%90%8E.gif",alt:"ä¼˜åŒ–å"}})]),t._v(" "),a("p",[t._v("çœ‹äº†ä¸‹fps å·²ç»æˆåŠŸå‡åˆ°äº†30fps, è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œ ç¬¬ä¸€æ®µæˆ‘ä»¬åœ¨å¾ªç¯ä¸­å»åšç»˜å›¾æ“ä½œï¼Œ å¾ªç¯ä¸€æ¬¡ï¼Œ stoke() ä¸€æ¬¡ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œç¬¬äºŒä¸ªç›´æ¥æŠŠstokeï¼ˆï¼‰ ï¼Œæ”¾åˆ°å¾ªç¯å¤–ï¼Œå…¶å®å°±è°ƒç”¨äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºå‡å°‘ç»˜å›¾æŒ‡ä»¤æ˜¯å¯ä»¥æé«˜"),a("strong",[t._v("canvasçš„æ€§èƒ½çš„")])]),t._v(" "),a("h1",{attrs:{id:"åˆ†å±‚æ¸²æŸ“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å±‚æ¸²æŸ“"}},[t._v("#")]),t._v(" åˆ†å±‚æ¸²æŸ“")]),t._v(" "),a("p",[t._v("ä¸ºä»€ä¹ˆéœ€è¦åˆ†å±‚æ¸²æŸ“ï¼Œ åœ¨æ¸¸æˆä¸­ï¼Œå‡è®¾äººç‰©çš„ä¸åœåœ°åœ¨ç§»åŠ¨ï¼Œä½†æ˜¯å‘¢èƒŒæ™¯å¯èƒ½åŠ äº†å¾ˆå¤šèŠ±é‡Œå‘¼å“¨çš„å…ƒç´ ï¼Œä½†æ˜¯æˆ‘åœ¨æ¯ä¸€æ¬¡æ›´æ–°çš„æ—¶å€™ï¼Œåœºæ™¯æœ¬èº«æ˜¯ä¸å˜çš„ï¼Œå˜çš„åªæœ‰äººç‰©ä¸åœçš„ç§»åŠ¨ï¼Œå¦‚æœæ¯ä¸€å¸§å†å»é‡ç»˜ä¸å°±é€ æˆäº†æ€§èƒ½æµªè´¹ï¼Œ è¿™æ—¶å€™åˆ†å±‚canvaså°±å‡ºç°äº† æˆ‘ä»¬å…ˆçœ‹ä¸‹ä¸€å¼ å›¾ä½ å¯èƒ½å°±æ˜ç™½äº†ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20211215110220692.png",alt:"åˆ†å±‚æ¸²æŸ“"}})]),t._v(" "),a("p",[t._v("æˆ‘é€šè¿‡3ä¸ªcanvaså åœ¨ä¸€èµ·ï¼Œé€šè¿‡è®¾ç½®æ¯ä¸ªcanvasçš„ z-index è¾¾åˆ°äº†3ä¸ªç”»å¸ƒè¿˜æ˜¯åœ¨åŒä¸€å±‚çš„é”™è§‰ï¼Œè¿™æ ·æˆ‘åœ¨requestAnimationä¸­ï¼Œåªéœ€è¦å¯¹ åŠ¨çš„å›¾å½¢å»åšé‡æ–°ç»˜åˆ¶å°±å¥½äº†ï¼Œå…¶ä½™çš„ä¾æ—§æ˜¯ä¿æŒä¸åŠ¨ ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘å†™äº†ä¸‹é¢è¿™äº›ä¼ªä»£ç ")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("canvas id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"backgroundCanvas"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("canvas id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peopleActionCanvas"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" peopleActionCanvas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'peopleActionCanvas'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" backgroundCanvas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'backgroundCanvas'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("draw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawPeopleAction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("peopleActionCanvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("needDrawBackground"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("drawBackground")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("backgroundCanvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("draw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("ä¸€ä¸ªèƒŒæ™¯å±‚ä¸€ä¸ªè¿åŠ¨å±‚ï¼Œ åœ¨æŠ½è±¡ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åº”è¯¥å»åšåˆ†å±‚ ï¼Œå¦‚æœç”»å¸ƒçº¯æ˜¯é™æ€çš„å°±æ²¡æœ‰å¿…è¦å»åšåˆ†å±‚äº†ï¼Œ å¦‚æœå½“å‰æœ‰é™æ€æœ‰ä¸œåŠ¨æ€çš„ï¼Œä½ å¯ä»¥é€»è¾‘å±‚æ”¾åœ¨æœ€ä¸Šé¢ï¼Œç„¶åå±•ç¤ºå±‚ æ”¾åœ¨æœ€åº•ä¸‹å°±å¯ä»¥å®ç°æ‰€è°“çš„ åˆ†å±‚æ¸²æŸ“äº†ï¼Œä½†æ˜¯æœ€å¥½ä¿æŒåœ¨3-5ä¸ªã€‚")]),t._v(" "),a("h1",{attrs:{id:"å±€éƒ¨æ¸²æŸ“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å±€éƒ¨æ¸²æŸ“"}},[t._v("#")]),t._v(" å±€éƒ¨æ¸²æŸ“")]),t._v(" "),a("p",[t._v("å±€éƒ¨æ¸²æŸ“çš„è¯å…¶å®å°±æ˜¯è°ƒç”¨canvas çš„ clipæ–¹æ³•ï¼Œ è¿™ä¸ªæ–¹æ³•å¾ˆå¤šåŒå­¦ä¸çŸ¥é“æ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬å…ˆçœ‹ä¸‹å®˜æ–¹æ–‡æ¡£MDN å¯¹è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("**CanvasRenderingContext2D**")]),a("strong",[a("code",[t._v(".clip()")])]),t._v(" æ˜¯ Canvas 2D API å°†å½“å‰åˆ›å»ºçš„è·¯å¾„è®¾ç½®ä¸ºå½“å‰å‰ªåˆ‡è·¯å¾„çš„æ–¹æ³•")])]),t._v(" "),a("p",[t._v("ä½ å¯ä»¥è¯•ç€æ€è€ƒä¸€ä¸‹ å¦‚ä½•ç”¨canvas ç”»ä¸€ä¸ª1/4åœ†ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" canvas  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),t._v("\nctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("arc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("75")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ctx.clip();")]),t._v("\nctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("è¿™é‡Œå¡«å……çš„æ—¶å€™ æ²¡æœ‰ç”¨clip ç”»é¢ä¸Šåº”è¯¥æ˜¯ä¸€ä¸ªçŸ©å½¢ã€‚ å¦‚å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20211213234952404.png",alt:"çŸ©å½¢"}})]),t._v(" "),a("p",[t._v("è¿™æ—¶å€™æˆ‘æŠŠclipæ³¨é‡Šè§£å¼€æ¥ï¼Œ ä½ ä¼šå‘ç°çŸ©å½¢ å˜æˆäº†ä¸€ä¸ªåŠåœ†ã€‚ æ‰€ä»¥clip è¿™ä¸ª api ç»“åˆ fillRect å¡«å……  å°±æ˜¯å®ç°å¡«å……ä»»æ„å›¾å½¢è·¯å¾„ã€‚æˆ‘ä»¬çœ‹ä¸‹å›¾ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20211213235309359.png",alt:"åŠåœ†"}})]),t._v(" "),a("p",[t._v("è¿™æ—¶å€™å°±ä¼šæœ‰åŒå­¦é—®è¿™ä¸œè¥¿å’Œæˆ‘ä»¬å±€éƒ¨æ¸²æŸ“æœ‰ä»€ä¹ˆå…³ç³»ï¼Œå¤§å®¶éƒ½çŸ¥é“canvas å®ç°åŠ¨ç”»ï¼Œæ¯ä¸€å¸§éƒ½ä¼šæŠŠå½“å‰ç”»é¢çš„ä¸Šçš„ä¸œè¥¿å…¨éƒ¨æ¸…æ¥šç„¶åå†é‡æ–°æ›´æ–°ä¸€éï¼Œçœ‹ä¸‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("rgba(")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(",1)")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n          ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("arc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("éšæœºç”Ÿæˆäº†20ä¸ªåœ†å½¢, å¦‚å›¾æ‰€ç¤ºï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20211214000317691.png",alt:"random"}})]),t._v(" "),a("p",[t._v("è¿™æ—¶å€™å¦‚æœæˆ‘è¯´æˆ‘åªæƒ³æ”¹ä¸­é—´é‚£ä¸ªç»¿è‰²çš„åœ†é¢œè‰²æˆ‘åªæƒ³æŠŠå®ƒæ”¹æˆè“è‰²ï¼Œä½†æ˜¯å…¶ä»–çš„åœ†å…¶å®æ²¡æœ‰å±æ€§ä¸Šçš„æ”¹å˜ï¼ŒæŒ‰ç…§æ­£å¸¸çš„æ“ä½œåº”è¯¥å°±æ˜¯ä¸‹é¢å‡ æ­¥")]),t._v(" "),a("ol",[a("li",[t._v("æ¸…é™¤å½“å‰ç”»å¸ƒ")]),t._v(" "),a("li",[t._v("é‡æ–°ç”»æ‰€æœ‰å›¾å½¢")]),t._v(" "),a("li",[t._v("æ‰¾åˆ°æˆ‘ä»¬è¦æ”¹çš„å›¾å½¢ ç„¶åæŠŠé¢œè‰²æ”¹æ‰")])]),t._v(" "),a("p",[t._v("è¿™å¯¹äºç”»å¸ƒä¸­å›¾å½¢æ¯”è¾ƒå°‘çš„æƒ…å†µä¸‹æ˜¯æ¯”è¾ƒOKçš„ï¼Œä½†æ˜¯å¦‚æœå½“ç”»å¸ƒå‡ºç°ä¸‹é¢è¿™æ ·å­æ˜¯ä¸æ˜¯å°±ä¼šå‡ºç°æ‰€è°“çš„æ¸²æŸ“æµªè´¹å˜›")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20211214001141419.png",alt:"1000ä¸ªå›¾å½¢"}})]),t._v(" "),a("p",[t._v("è¿™æ˜¯canvas ä¸­ç”»äº†1000 ä¸ªåœ†å½¢ï¼Œ å¦‚æœä½ åªæ”¹ä¸€ä¸ªé¢œè‰²ï¼Œé‚£å…¶ä»–999éƒ½æ˜¯ä¸å˜çš„ è¿™ç§æµªè´¹æ˜¯è‚¯å®šå­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œ å¦‚æœåœ¨åšåŠ¨ç”»æ•ˆæœå¯æƒ³è€ŒçŸ¥ï¼Œä¸¢å¸§éå¸¸å‰å®³ã€‚ è¿™é‡Œå°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬ä¸Šé¢çš„api")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20211214001532216.png",alt:"çº¢è‰²åŒºåŸŸ"}})]),t._v(" "),a("p",[t._v("æ­£ç¡®çš„åšæ³•å…¶å®å°±æ˜¯æˆ‘ä»¬è¦åšå±€éƒ¨åˆ·æ–°ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("ç¡®å®šæ”¹å˜çš„å…ƒç´ çš„åŒ…å›´ç›’ï¼ˆæ˜¯å¦å­˜åœ¨ç›¸äº¤ï¼‰")]),t._v(" "),a("li",[t._v("ç”»å‡ºè·¯å¾„ ç„¶å clip")]),t._v(" "),a("li",[t._v("æœ€åé‡æ–°ç»˜åˆ¶ç»˜åˆ¶æ”¹å˜çš„å›¾å½¢")])]),t._v(" "),a("p",[a("strong",[t._v("clip()")]),t._v(" ç¡®å®šç»˜åˆ¶çš„çš„è£å‰ªåŒºåŸŸï¼ŒåŒºåŸŸä¹‹å¤–çš„å›¾å½¢ä¸èƒ½ç»˜åˆ¶ï¼Œè¯¦æƒ…æŸ¥çœ‹ CanvasRenderingContext2D.clip()\n"),a("strong",[t._v("clearRect(x, y, width, height)")]),t._v(" æ“¦é™¤æŒ‡å®šçŸ©å½¢å†…çš„é¢œè‰²ï¼ŒæŸ¥çœ‹ CanvasRenderingContext2D.clearRect()")]),t._v(" "),a("h2",{attrs:{id:"åŒ…å›´ç›’"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŒ…å›´ç›’"}},[t._v("#")]),t._v(" åŒ…å›´ç›’")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬åˆšæ‰è¯´çš„ç”¨ä¸€ä¸ªæ¡†å»æŠŠå›¾å½¢åŒ…å›´ä½ï¼Œ å…¶å®åœ¨å‡ ä½•ä¸­æˆ‘ä»¬å«"),a("strong",[t._v("åŒ…å›´ç›’")]),t._v(" æˆ–è€…æ˜¯"),a("strong",[t._v("boundingBox")]),t._v("ã€‚ å¯ä»¥ç”¨æ¥"),a("strong",[t._v("å¿«é€Ÿæ£€æµ‹")]),t._v("ä¸¤ä¸ªå›¾å½¢æ˜¯å¦ç›¸äº¤ï¼Œ ä½†æ˜¯è¿˜æ˜¯ä¸å¤Ÿå‡†ç¡®ã€‚æœ€å¥½è¿˜æ˜¯ç”¨å›¾å½¢ç®—æ³•å»è§£å†³ã€‚ æˆ–è€…æ¸¸æˆä¸­çš„ç¢°æ’æ£€æµ‹ï¼Œéƒ½æœ‰è¿™ä¸ªæ¦‚å¿µã€‚å› ä¸ºæˆ‘è¿™é‡Œè®¨è®ºçš„æ˜¯2dçš„boudingboxï¼Œ è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚æˆ‘ç»™ä½ çœ‹å‡ å¼ å›¾ï¼Œ æˆ–è®¸ä½ å°±ç¬é—´æ˜ç™½äº†ã€‚")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210822113735608.png",alt:"image-20210822113735608"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20210822173140738.png",alt:"ä»»æ„å¤šè¾¹å½¢"}})]),t._v(" "),a("p",[t._v("è™šçº¿æ¡†å…¶å®å°±æ˜¯boundingBox, å…¶å®å°±æ˜¯æ ¹æ®å›¾å½¢çš„å¤§å°ï¼Œç®—å‡ºä¸€ä¸ªçŸ©å½¢è¾¹æ¡†ã€‚ç†è®ºæˆ‘ä»¬çŸ¥é“äº†ï¼Œæ˜ å°„åˆ°ä»£ç å±‚æ¬¡ï¼Œ æˆ‘ä»¬æ€ä¹ˆå»è¡¨è¾¾å‘¢? æˆ‘è¿™é‡Œå¸¦å¤§å®¶åŸç”Ÿå®ç°ä¸€ä¸‹bound2d ç±»ï¼Œ å…¶å®æˆ‘ä»¬æ¯ä¸ª2då›¾å½¢ï¼Œéƒ½å¯ä»¥å»å®ç°ã€‚ å› ä¸º2då›¾å½¢éƒ½æ˜¯ç”±ç‚¹ç»„æˆçš„ï¼Œæ‰€ä»¥åªè¦è·å¾—æ¯ä¸€ä¸ªå›¾å½¢çš„ç¦»æ•£ç‚¹é›†åˆï¼Œ ç„¶åå¯¹è¿™äº›ç‚¹ï¼Œå»è·å¾—ä¸€ä¸ª2dç©ºé—´çš„boundBoxã€‚")]),t._v(" "),a("p",[t._v("æƒ³çœ‹å…·ä½“çš„å®ç°å¯ä»¥å‚è€ƒ"),a("strong",[t._v("three.js box2d")]),t._v(" çš„æºç ï¼Œ å†™çš„å¾ˆæ¸…æ¥šï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šä»‹ç»äº†ã€‚")]),t._v(" "),a("h1",{attrs:{id:"ç¦»å±canvas-å’Œwebworker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¦»å±canvas-å’Œwebworker"}},[t._v("#")]),t._v(" ç¦»å±canvas å’Œwebworker")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å…ˆè¯´ä¸‹ ä»€ä¹ˆæ˜¯ç¦»å±canvas???")]),t._v(" "),a("p",[a("strong",[a("code",[t._v("OffscreenCanvasæä¾›äº†ä¸€ä¸ªå¯ä»¥è„±ç¦»å±å¹•æ¸²æŸ“çš„canvaså¯¹è±¡ã€‚å®ƒåœ¨çª—å£ç¯å¢ƒå’Œweb workerç¯å¢ƒå‡æœ‰æ•ˆã€‚")])])]),t._v(" "),a("p",[t._v("è„±ç¦»å±å¹•æ¸²æŸ“çš„canvaså¯¹è±¡ï¼Œè¿™å¯¹æˆ‘ä»¬å®é™…å†™åŠ¨ç”»çš„æ—¶å€™çœŸçš„æœ‰ç”¨å—ï¼Ÿï¼Ÿï¼Ÿ")]),t._v(" "),a("p",[t._v("ç­”æ¡ˆæ˜¯è‚¯å®šçš„")]),t._v(" "),a("p",[t._v("æƒ³è±¡ä»¥ä¸‹è¿™ä¸ªåœºæ™¯ï¼šå¦‚æœå‘ç°è‡ªå·±åœ¨æ¯ä¸ªåŠ¨ç”»å¸§ä¸Šé‡å¤äº†ä¸€äº›ç›¸åŒçš„ç»˜åˆ¶æ“ä½œï¼Œè¯·è€ƒè™‘å°†å…¶åˆ†æµåˆ°å±å¹•å¤–çš„ç”»å¸ƒä¸Šã€‚ ç„¶åï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦é¢‘ç¹åœ°å°†å±å¹•å¤–å›¾åƒæ¸²æŸ“åˆ°ä¸»ç”»å¸ƒä¸Šï¼Œè€Œä¸å¿…é¦–å…ˆé‡å¤ç”Ÿæˆè¯¥å›¾åƒçš„æ­¥éª¤ã€‚ç”±äºæµè§ˆå™¨æ˜¯å•çº¿ç¨‹ï¼Œcanvasçš„è®¡ç®—å’Œæ¸²æŸ“å…¶å®æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹çš„ã€‚è¿™å°±ä¼šå¯¼è‡´åœ¨åŠ¨ç”»ä¸­ï¼ˆæœ‰æ—¶å€™å¾ˆè€—æ—¶ï¼‰çš„è®¡ç®—æ“ä½œå°†ä¼šå¯¼è‡´Appå¡é¡¿ï¼Œé™ä½ç”¨æˆ·ä½“éªŒã€‚")]),t._v(" "),a("p",[t._v("å¹¸è¿çš„æ˜¯, "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas",target:"_blank",rel:"noopener noreferrer"}},[t._v("OffscreenCanvas"),a("OutboundLink")],1),t._v(" ç¦»å±Canvaså¯ä»¥éå¸¸æ£’çš„è§£å†³è¿™ä¸ªéº»çƒ¦ï¼")]),t._v(" "),a("p",[t._v("åˆ°ç›®å‰ä¸ºæ­¢ï¼Œcanvasçš„ç»˜åˆ¶åŠŸèƒ½éƒ½ä¸"),a("code",[t._v("<canvas>")]),t._v("æ ‡ç­¾ç»‘å®šåœ¨ä¸€èµ·ï¼Œè¿™æ„å‘³ç€canvas APIå’ŒDOMæ˜¯è€¦åˆçš„ã€‚è€ŒOffscreenCanvasï¼Œæ­£å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼Œé€šè¿‡å°†Canvasç§»å‡ºå±å¹•æ¥è§£è€¦äº†DOMå’Œcanvas APIã€‚")]),t._v(" "),a("p",[t._v("ç”±äºè¿™ç§è§£è€¦ï¼ŒOffscreenCanvasçš„æ¸²æŸ“ä¸DOMå®Œå…¨åˆ†ç¦»äº†å¼€æ¥ï¼Œå¹¶ä¸”æ¯”æ™®é€šcanvasé€Ÿåº¦æå‡äº†ä¸€äº›ï¼Œè€Œè¿™åªæ˜¯å› ä¸ºä¸¤è€…ï¼ˆCanvaså’ŒDOMï¼‰ä¹‹é—´æ²¡æœ‰åŒæ­¥ã€‚ä½†æ›´é‡è¦çš„æ˜¯ï¼Œå°†ä¸¤è€…åˆ†ç¦»åï¼Œcanvaså°†å¯ä»¥åœ¨Web Workerä¸­ä½¿ç”¨ï¼Œå³ä½¿åœ¨Web Workerä¸­æ²¡æœ‰DOMã€‚è¿™ç»™canvasæä¾›äº†æ›´å¤šçš„å¯èƒ½æ€§ã€‚")]),t._v(" "),a("p",[t._v("è¿™å°±ç¦»å±canvas ä¸ºå•¥å’Œwebworker è¿™ä¹ˆé…çš„ç¼˜æ•…äº†ã€‚")]),t._v(" "),a("h2",{attrs:{id:"å¦‚ä½•åˆ›å»ºç¦»å±canvas"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•åˆ›å»ºç¦»å±canvas"}},[t._v("#")]),t._v(" å¦‚ä½•åˆ›å»ºç¦»å±canvas?")]),t._v(" "),a("p",[t._v("åˆ›å»ºç¦»å±canvasæœ‰ä¸¤ç§æ–¹å¼ï¼š")]),t._v(" "),a("p",[a("strong",[t._v("ä¸€ç§")]),t._v("æ˜¯é€šè¿‡OffscreenCanvasçš„æ„é€ å‡½æ•°ç›´æ¥åˆ›å»ºã€‚æ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¦»å±canvas ")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" offscreen "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OffscreenCanvas")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ç¬¬äºŒç§æ˜¯ä½¿ç”¨canvasçš„transferControlToOffscreen")]),t._v("å‡½æ•°è·å–ä¸€ä¸ªOffscreenCanvaså¯¹è±¡ï¼Œç»˜åˆ¶è¯¥OffscreenCanvaså¯¹è±¡ï¼ŒåŒæ—¶ä¼šç»˜åˆ¶canvaså¯¹è±¡ã€‚æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" canvas  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" offscreen "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferControlToOffscreen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("æˆ‘å†™äº†ä¸‹é¢è¿™ä¸ªå°demo éªŒè¯ä¸‹åˆ°åº•æ˜¯ä¸æ˜¯å¯é çš„")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" canvas  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¦»å±canvas   const offscreen1 = new OffscreenCanvas(200, 200);  const offscreen2 = canvas.transferControlToOffscreen();  console.error(offscreen1,offscreen2, '222')    ")]),t._v("\n")])])]),a("p",[t._v("æ‰“å¼€æµè§ˆå™¨çš„æˆªå›¾å¦‚ä¸‹ï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/image-20211214235213394.png",alt:"ç¦»å±canvas"}})]),t._v(" "),a("p",[t._v("æ²¡ä»€ä¹ˆé—®é¢˜,æˆ‘ä»¬çš„çŒœæƒ³æ˜¯å¯¹çš„")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œç¦»å±canvasæ€ä¹ˆä¸ä¸»çº¿ç¨‹çš„canvasé€šä¿¡å‘¢")]),t._v(" "),a("p",[t._v("è¿™æ—¶å€™å¼•ç”¨å¦å¤–ä¸€ä¸ªapi "),a("strong",[t._v("transferToImageBitmap")])]),t._v(" "),a("p",[t._v("é€šè¿‡transferToImageBitmapå‡½æ•°å¯ä»¥ä»OffscreenCanvaså¯¹è±¡çš„ç»˜åˆ¶å†…å®¹åˆ›å»ºä¸€ä¸ªImageBitmapå¯¹è±¡ã€‚è¯¥å¯¹è±¡å¯ä»¥ç”¨äºåˆ°å…¶ä»–canvasçš„ç»˜åˆ¶ã€‚")]),t._v(" "),a("p",[t._v("æ¯”å¦‚ä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨æ˜¯ï¼ŒæŠŠä¸€ä¸ªæ¯”è¾ƒè€—è´¹æ—¶é—´çš„ç»˜åˆ¶æ”¾åˆ°"),a("strong",[t._v("web worker")]),t._v("ä¸‹çš„OffscreenCanvaså¯¹è±¡ä¸Šè¿›è¡Œï¼Œç»˜åˆ¶å®Œæˆåï¼Œåˆ›å»ºä¸€ä¸ªImageBitmapå¯¹è±¡ï¼Œå¹¶æŠŠè¯¥å¯¹è±¡ä¼ é€’ç»™é¡µé¢ç«¯ï¼Œåœ¨é¡µé¢ç«¯ç»˜åˆ¶ImageBitmapå¯¹è±¡ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å†™ä¸ªå°demoæµ‹è¯•ä¸‹ï¼š")]),t._v(" "),a("h2",{attrs:{id:"ä¼˜åŒ–å‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–å‰"}},[t._v("#")]),t._v(" ä¼˜åŒ–å‰")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ç”» 10000 * 10000 ä¸ªçŸ©å½¢çœ‹çœ‹é¡µé¢çš„å“åº”å’Œæ—¶é—´ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" canvas  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'canvas'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  canvas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2d'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("draw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" j "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("j "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("j "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("          ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillRect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("j"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("draw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("arc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("75")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stroke")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("æˆ‘ä»¬ç›´æ¥çœ‹æ•ˆæœï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/before.gif",alt:"before"}})]),t._v(" "),a("p",[t._v("å¯ä»¥å¾ˆæ˜æ˜¾çš„æ„Ÿå—åˆ°ï¼Œåœ¨æ¸²æŸ“å‡ºå›¾å½¢å‰ï¼Œæµè§ˆå™¨æ˜¯å¤±å»å“åº”çš„ï¼Œæˆ‘ä»¬æ— æ³•åšè®¤å¯æ“ä½œã€‚è¿™æ ·çš„ç”¨æˆ·ä½“éªŒè‚¯å®šæ˜¯éå¸¸å·®çš„ã€‚")]),t._v(" "),a("h1",{attrs:{id:"ä¼˜åŒ–å"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–å"}},[t._v("#")]),t._v(" ä¼˜åŒ–å")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ä½¿ç”¨ç¦»å±canvas + webworker  è¿›è¡Œä¼˜åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å…ˆçœ‹ä¸‹worker çš„ä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" offscreen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç›‘å¬ä¸»çº¿ç¨‹å‘çš„ä¿¡æ¯onmessage = function (e) {  if(e.data.msg == 'init'){    init();    draw();  }}function init() {  offscreen = new OffscreenCanvas(512, 512);  ctx = offscreen.getContext(\"2d\");}// ç»˜åˆ¶å›¾å½¢function draw() {   ctx.clearRect(0,0,offscreen.width,offscreen.height);   for(var i = 0;i < 10000;i ++){    for(var j = 0;j < 1000;j ++){      ctx.fillRect(i*3,j*3,2,2);    }  }  const imageBitmap = offscreen.transferToImageBitmap();    // ä¼ é€ç»™ä¸»çº¿ç¨‹  postMessage({imageBitmap:imageBitmap},[imageBitmap]);}")]),t._v("\n")])])]),a("p",[t._v("çœ‹ä¸‹ä¸»çº¿ç¨‹çš„ä»£ç ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" worker "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Worker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./worker.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'init'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onmessage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™é‡Œå°±æ¥å—åˆ°work ä¼ æ¥çš„ç¦»å±canvasä½å›¾  ctx.drawImage(e.data.imageBitmap,0,0);} ctx.arc(100,75,50,0,2*Math.PI); ctx.stroke()")]),t._v("\n")])])]),a("p",[t._v("ç›´æ¥çœ‹æ•ˆæœï¼š")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://ztifly.oss-cn-hangzhou.aliyuncs.com/after.gif",alt:"after"}})]),t._v(" "),a("p",[t._v("å¯¹æ¯”ä¸¤ä¸ªå¾ˆæ˜æ˜¾çš„å˜åŒ–ï¼Œ ç”»å¤šä¸ªçŸ©å½¢æ˜¯ä¸ªéå¸¸è€—æ—¶çš„æ“ä½œä¼šå½±å“å…¶ä»–å›¾å½¢æ¸²æŸ“ï¼Œå¯ä»¥é‡‡ç”¨ç¦»å±canvas + webworker æ¥è§£å†³è¿™ç§å¤±å»å“åº”ã€‚")]),t._v(" "),a("h1",{attrs:{id:"æœ€å"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æœ€å"}},[t._v("#")]),t._v(" æœ€å")]),t._v(" "),a("p",[t._v("æœ¬æœŸçš„canvasä¼˜åŒ–å°±åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºå’Œæˆ‘äº¤æµï¼Œæˆ–è€…æœ‰ä»€ä¹ˆå†™çš„ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿æŒ‡æ­£ã€‚æˆ‘ç®€å•åšä¸€ä¸ªæ€»ç»“")]),t._v(" "),a("ol",[a("li",[t._v("ç»˜åˆ¶çš„å›¾å½¢çš„æ•°é‡å’Œå¤§å°ä¼šå½±å“canvasçš„æ€§èƒ½")]),t._v(" "),a("li",[t._v("å›¾å½¢æ•°é‡è¿‡å¤šï¼Œä½†æ˜¯åªåˆ·æ–°éƒ¨åˆ† å¯ä»¥ä½¿ç”¨å±€éƒ¨æ¸²æŸ“")]),t._v(" "),a("li",[t._v("é€»è¾‘å±‚å’ŒèƒŒæ™¯å›¾å±‚åˆ†ç¦» å¯ä»¥ä½¿ç”¨åˆ†å±‚æ¸²æŸ“")]),t._v(" "),a("li",[t._v("æŸäº›é•¿æ—¶é—´çš„é€»è¾‘å½±å“ä¸»çº¿ç¨‹çš„ï¼Œ å¯ä»¥ä½¿ç”¨ç¦»å±æ¸²æŸ“ å’Œwebworker æ¥è§£å†³é—®é¢˜")])])])}),[],!1,null,null,null);s.default=r.exports}}]);